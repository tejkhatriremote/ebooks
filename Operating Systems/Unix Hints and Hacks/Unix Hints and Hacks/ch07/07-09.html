<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Displays and Emulations</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=07//-->
<!--PAGES=274-278//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="07-08.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-10.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>Whether you want to walk someone through a series of tasks, provide insight into what you&#146;re doing visually, or convey the proper use of commands to another person, having the ability to display commands on another terminal device can be extremely beneficial and timesaving.
</P>
<p><font size="+1"><b>Real World Experiences</B></FONT></P>
<p>One of the most frustrating things for a support person is trying to walk a user through a series of commands when they insist on wanting to know what it takes to make something work in UNIX. This script is perfect for educating users in some UNIX basics. The best part is that you are still in control of the window. You can be on the phone with the user describing each step that you&#146;re doing and she can see the results.
</P>
<p>If a user insists that a file exists when it doesn&#146;t, or she is unable to access files and directories when you know she can, you can have her use the script. Observe your user and see why she is having such problems. This is typical when users start using backslashes (<small>\</SMALL>), uppercase, and other characters that apply to DOS and not to UNIX. You will be able to pick out the problem right away and prevent the user from making the same mistake again.</P>
<p>The command also acts as a big brother, watching the steps of those who log in as root, or any other account for that matter. By placing the command into the appropriate startup file, such as .login, the command sends output to a predefined terminal device on your desktop. You can now spy on anyone who logs in with root access and watch what she is doing. It is best that you get management approval before attempting this little hack.</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>sh, tee, tty</SMALL></P>
<p>World Wide Web:</P>
<p>TTY-Watcher&#151;<a href="../WebStripper/protected.html#link=ftp://coast.cs.purdue.edu/pub/tools/unix/ttywatcher">ftp://coast.cs.purdue.edu/pub/tools/unix/ttywatcher</A></P>
<h3><a name="Heading16"></A><font color="#000077">7.8 Refreshing X</FONT></H3>
<h4 align="LEFT"><a name="Heading17"></A><font color="#000077">7.8.1 Description</FONT></H4>
<p>There is a way to handle a screen when the graphics make things unreadable and confusing.
</P>
<p><font size="+1"><b>Example: Refresh X</B></FONT></P>
<p>Flavors: AT&ampT, BSD (Running X11R6)
</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
<b>xrefresh</B> [-white] [-black] [-root] [-none] [-solid <i>color</I>]
</PRE>
<!-- END CODE SNIP //-->
<p>There are times when spurious error messages, graphical lines, or windows can cause the X display to get messed up. There is a chance to clean the display with the command <small>xrefresh</SMALL>, located in the X11R6 bin directory.</P>
<!-- CODE SNIP //-->
<pre>
% /usr/lib/bin/X11/xrefresh
</PRE>
<!-- END CODE SNIP //-->
<p>When <small>xrefresh</SMALL> is executed it maps a fresh window on top of the desired area of the screen and then immediately unmaps it. This causes refresh events to be sent to all the running applications on the display. By default, a fresh window consisting of a window with no background is used and causes the applications to be repainted in the smoothest way possible. However, various options are available to make the background a specific color&#151;black, white, and root or nothing.</P>
<!-- CODE SNIP //-->
<pre>
% xrefresh -black
</PRE>
<!-- END CODE SNIP //-->
<p>If you conclude that refresh will not clear the X display, you might have to kill the entire X session. See section 5.15, &#147;Kill an Account,&#148; in Chapter 5, &#147;Account Management.&#148;
</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>When text or other forms of graphical images overlay the desktop, making it difficult to read what&#146;s on the desktop, refreshing X is sometimes the only option.
</P>
<p><font size="+1"><b>Real World Experiences</B></FONT></P>
<p>Window movement and the loss of a console window can cause your session to become confusing to the naked eye. On older versions of X and some that lack the memory required by an X session, when an X window is moved across the desktop it should refresh the background as the window is moved to its new location. In reality, it can leave a trail of lines and broken images of the window being moved.
</P>
<p>There have also been cases when text from STDOUT is sent directly to the desktop. This can happen on older versions of X when the text of STDOUT is originally sent to the console window and the window is then closed. The text then sends the output to the console window that is beneath the X session. When this occurs you see text scrolling up through your desktop if there is a lot of data being sent to STDOUT. If not, refresh your X session and open a new graphic console window.</P>
<!-- CODE SNIP //-->
<pre>
% /usr/X11/bin/xterm -C
</PRE>
<!-- END CODE SNIP //-->
<p>To open a new X terminal window that receives console output, pass the -c option to the command. When open, STDOUT should be redirected to the window and off the desktop.
</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>xrefresh, xterm</SMALL></P>
<h3><a name="Heading18"></A><font color="#000077">7.9 Killing Resources with xkill</FONT></H3>
<h4 align="LEFT"><a name="Heading19"></A><font color="#000077">7.9.1 Description</FONT></H4>
<p>There is a way to kill an actual resource, which is quite a bit different from killing a process.
</P>
<p>Flavors: AT&ampT, BSD</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
xkill
</PRE>
<!-- END CODE SNIP //-->
<p>The command <small>xkill</SMALL> doesn&#146;t kill an entire X session but it does kill a client by the X resource that is attached to it.</P>
<!-- CODE SNIP //-->
<pre>
% xkill
</PRE>
<!-- END CODE SNIP //-->
<p>When <small>xkill</SMALL> is executed it displays a unique cursor that is a prompt to the user to select a window to be killed. This is a great way to kill the windows that the regular <small>kill</SMALL> command doesn&#146;t close after you kill their PID. Yes, if you kill the PID of a process that opens another window, it should close it. The reality is that sometimes it doesn&#146;t. Using <small>xkill</SMALL> is one more way to clean up your X session without reinitializing X.</P>
<p>The types of windows that can be killed can be opened by applications or xterms. They are not specific to any one type of window. If a nonroot window is clicked on, the server closes its connection to the client that created the window. If you run the <small>xcalendar</SMALL> program and click on a day to add data to, a new window appears. If <small>xkill</SMALL> is executed and you click on the parent window or the window that relates to a specific calendar date, both windows will be killed, not simply the parent window or the child window.</P>
<blockquote>
<p><font size="-1"><hr><b>Warning:&nbsp;&nbsp;</B>A premature click of the button can kill an important window by mistake. Make sure that the window is in the foreground when it is killed.</FONT><hr>
</BLOCKQUOTE>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>The method of killing windows with <small>xkill</SMALL> makes it easy to not have to worry about the process IDs that are associated with the window or the process that is controlling it.</P>
<p><font size="+1"><b>Real World Experiences</B></FONT></P>
<p>There are occasions when you have a window that will not die from a remote X server displayed on your local workstation. Even if you can kill the process on the remote server, the window still doesn&#146;t disappear. The <small>xkill</SMALL> is your last chance to get rid of the window. Keep in mind that, in certain situations, the window might die with the use of the <small>xkill</SMALL> command but this doesn&#146;t mean that the process exits and dies as well. There is still a chance that the process will be left in a zombie state even after the window is gone. Whenever possible, always confirm the window&#146;s process ID both before and after the <small>xkill</SMALL> is fully executed.</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man page:
</P>
<p><small>xkill</SMALL></P>
<h3><a name="Heading20"></A><font color="#000077">7.10 Setting xterm Titlebars</FONT></H3>
<h4 align="LEFT"><a name="Heading21"></A><font color="#000077">7.10.1 Flavors: AT&ampT, BSD</FONT></H4>
<p>Wouldn&#146;t it be nice to be able to have your current path or the hostname displayed at the top of the xterm window? There is a certain escape sequence that can be passed to xterm that updates the property which the window manager needs for the string that appears in the window titlebar.
</P>
<!-- CODE SNIP //-->
<pre>
% echo &#147;ESC]2;Hostname:&#145;hostname&#145;&#148;
</PRE>
<!-- END CODE SNIP //-->
<p><br></P>
<center>
<table border>
<tr>
<td><a href="07-08.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-10.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>