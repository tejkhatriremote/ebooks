<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Displays and Emulations</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=07//-->
<!--PAGES=267-270//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="07-06.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-08.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p>When the program executes, it clears the screen and waits five seconds after each command is executed. If the display scrolls for each command, you have a problem with the emulation. Here is a quick runthrough of the script:
</P>
<!-- CODE //-->
<pre>
% monsys

<i>clear</I>
pluto - Wed Nov 4, 17:40:53 GMT 1998
 5:40pm up 81 days, 2:08, 2 users, load average: 0.00, 0.01, 0.00
<i>wait</I>

<i>clear</I>
Linux 2.0.33.
                         THIS IS A RESTRICTED SYSTEM

                        ALL ACCESS IS BEING MONITORED

                There is a SYSTEM OUTAGE tonight at 10:00pm PST
                           For routine maintenance
Have A Nice Day...
<i>wait</I>

<i>clear</I>
Filesystem       1024-blocks  Used Available Capacity Mounted on
/dev/hda1            2289010  550831  1619842     25%   /
/dev/hdb1            2417493   74936  2217567      3%   /usr2
/dev/hdc1            2417493  116690  2175813      5%   /usr3
<i>wait</I>

<i>clear</I>
lo     Link encap:Local Loopback
       inet addr:127.0.0.1  Bcast:127.255.255.255  Mask:255.0.0.0
       UP BROADCAST LOOPBACK RUNNING  MTU:3584  Metric:1
       RX packets:10618 errors:0 dropped:0 overruns:0
       TX packets:10618 errors:0 dropped:0 overruns:0

eth0   Link encap:10Mbps Ethernet  HWaddr 00:60:97:56:9B:85
       inet addr:209.134.46.67  Bcast:209.134.46.95
       &#8658;Mask:255.255.255.224
       UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
       RX packets:2665861 errors:0 dropped:0 overruns:0
       TX packets:2748703 errors:0 dropped:0 overruns:0
       Interrupt:10 Base address:0x300
<i>wait</I>

<i>clear</I>
Kernel routing table
Destination   Gateway       Genmask         Flags Metric Ref Use
Iface
127.0.0.1     0.0.0.0       255.255.255.255 UH    0      0      2
lo
209.134.46.64 0.0.0.0       255.255.255.224 U     0      0   2731
eth0
0.0.0.0       209.134.46.94 0.0.0.0         UG    1      0  75770
eth0
<i>wait</I>

clear
Nov  1 21:51:36 ugu login: setuid() failed
Nov  1 21:52:17 ugu in.telnetd[14211]: connect from 199.52.34.2
Nov  1 21:54:49 ugu in.telnetd[14214]: connect from
&#8658;207.115.157.108
Nov  1 21:54:51 ugu login: 2 LOGIN FAILURES FROM
&#8658;ppp-207-115-157-108
Nov  1 22:02:11 ugu in.telnetd[14228]: connect from 209.124.46.67
Nov  2 05:27:22 ugu in.telnetd[14442]: connect from
&#8658;207.115.157.118
Nov  3 08:08:24 ugu in.telnetd[15596]: connect from 206.116.11.14
Nov  3 08:08:24 ugu telnetd[15596]: ttloop:  peer died:
&#8658;Unknown error
Nov  3 15:06:31 ugu in.pop3d[16004]: connect from 207.115.157.80
Nov  3 16:28:11 ugu in.pop3d[16042]: connect from 207.115.157.169
Nov  3 17:58:52 ugu sendmail[16088]: RAA16087: to=root,
&#8658;delay=00:00:00,
Nov  4 13:17:11 ugu in.telnetd[16888]: connect from 206.116.11.14
Nov  4 13:17:38 ugu login: 2 LOGIN FAILURES FROM ugu.com
Nov  4 14:57:48 ugu in.telnetd[17083]: connect from 206.116.11.14
Nov  4 17:39:20 ugu in.telnetd[17248]: connect from 206.116.11.14
<i>wait</I>
</PRE>
<!-- END CODE //-->
<p>There are a couple of things to consider before running these programs and scripts on your system. Most terminals today come with screensavers, which would never be activated, resulting in characters getting burned into the display. A greater issue is one of security. If paranoia runs high in your environment, you might consider this too much of a security risk depending on how you decide to implement such a program. If you have no way to set up a secure or restricted shell account, you might want to configure the program to have its own account on the system.
</P>
<!-- CODE SNIP //-->
<pre>
vi /etc/passwd
monsys:hdJKl3J5BSIEz:8888:20: Monitor System:/tmp:/usr/local/
&#8658;bin/monsys
</PRE>
<!-- END CODE SNIP //-->
<p>Set up the account so that the program is the shell in the /etc/passwd file. This way, if the file exits or a Ctrl&#43;C is hit, the account logs out immediately.
</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>Not all ASCII terminals can function as expected when the power is cycled or if they are new out of the box. Testing and monitoring their functionality is often a must.
</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>When systems and terminals are being moved on a daily basis, verifying the functionality of various ASCII terminals always takes place. You never know when a terminal&#146;s emulation will not function as it was intended to. After a system is moved into place, test it and leave monitoring tools in place to keep the terminal looking busy, if possible. This isn&#146;t only a dog-and-pony show for management and others&#151;if the terminal resides on a NFS file server, it will appear busy with data moving across it. This is a good deterrent to keep the users off the server and not make any attempts of logging in to it.
</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>clear, yes, top</SMALL></P>
<p>World Wide Web:</P>
<p><small>top</SMALL>&#151;<a href="../WebStripper/protected.html#link=ftp://ftp.groupsys.com:/pub/top/">ftp://ftp.groupsys.com:/pub/top/</A></P>
<h3><a name="Heading12"></A><font color="#000077">7.6 Troubleshooting ASCII Terminals</FONT></H3>
<h4 align="LEFT"><a name="Heading13"></A><font color="#000077">7.6.1 Description</FONT></H4>
<p>After walking up to an ASCII terminal to do some work, you might find that the screen is blank and won&#146;t accept any input from the keyboard. You can try several things to get back to a login prompt or a shell.
</P>
<p><font size="+1"><b>Example One: Check All Cables</B></FONT></P>
<p>In many cases, if the problem was reported by a user, it might be a loose cable. Many users overlook a loose cable even if you ask them to check the cables. When some users do look at the cables they don&#146;t look at the proper cables that deal with the problem at hand. If you work remotely, and nothing else works to get the terminal working, you must go and check the cables. You might even need to replace cables if they have gone bad. Be prepared with spares. Users sometimes kick a cable and snap the connector, roll a heavy object over a cable, or even steal the cable off the back of the terminal for some other use without telling anyone.
</P>
<p><font size="+1"><b>Example Two: Dealing With Locked Terminals</B></FONT></P>
<p>If you try typing on the keyboard three times and realize that you&#146;ve struck the keyboard twice extra for no reason, you probably will try striking the keyboard three more times again out of habit. After you finally convince yourself that the keyboard is not accepting any input, check whether the terminal is locked. Here are three ways that a terminal can become locked.
</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Ctrl&#43;Q and Ctrl&#43;S</I>&#151;When a user types Ctrl&#43;S, the text on the terminal stops. If this keystroke is made, the only way to release the keyboard is to use a Ctrl&#43;Q.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Scroll Lock and Hold Screen</I>&#151;Often, a user or even you hits the Scroll Lock key or the Hold Screen key by accident. Pressing the key again should release the keyboard.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Proprietary Locks</I>&#151;Some ASCII terminal manufacturers have proprietary keystrokes and passwords to lock and unlock their terminals. Check the manufacturer&#146;s manuals or Web site or the setup menus on the terminal for more information on dealing with these special features.
</DL>
<p><font size="+1"><b>Example Three: Resetting the getty Daemon</B></FONT></P>
<p>Flavor: AT&ampT, BSD
</P>
<p>Shells: All</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
<b>kill</B> <i>PID</I>
</PRE>
<!-- END CODE SNIP //-->
<p><br></P>
<center>
<table border>
<tr>
<td><a href="07-06.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-08.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>