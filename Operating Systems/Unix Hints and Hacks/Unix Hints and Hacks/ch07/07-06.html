<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Displays and Emulations</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=07//-->
<!--PAGES=263-267//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="07-05.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-07.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p>When 79 characters are passed to <small>yes</SMALL>, it displays the string over and over. If there are any problems with the line that the data is traveling through, some characters will drop and in some cases will not get the full 79 characters. Add spaces within the characters so that the output will have clean columns to help make the output easier to read.</P>
<!-- CODE //-->
<pre>
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
</PRE>
<!-- END CODE //-->
<p>If there is noise on the line you could see anything from missing characters to extraneous garbage on the screen.
</P>
<!-- CODE //-->
<pre>
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
<b>/.(&#43;   &#43;),\ 012356789 @][&lt*^% AB  FGHIJKM NOPQRSTU VWXYZ :{};
&#8658;abcdefijklmn
/.(&#43;),\ 012345789 @][&lt-&gt*^% ABCDE FGHIKLM NOP  QRSTU VWXYZ :{};
&#8658;abcdefghijklmn</B>
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
<b>/.(&#43;???),\ 012???678 9 @][&lt-???^% ABCDE FGH???LM NOST?????XYZ
&#8658;:{}; abcdefghijklmn</B>
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
/.(&#43;&#43;),\ 0123456789 @][&lt-&gt*^% ABCDE FGHIJKLM NOPQRSTU VWXYZ :{};
&#8658;abcdefghijklmn
</PRE>
<!-- END CODE //-->
<p>If the display of all the characters is too confusing, you can always display a series of spaces and one character towards the end:
</P>
<!-- CODE SNIP //-->
<pre>
% yes &#145;                                                      # &#146;
</PRE>
<!-- END CODE SNIP //-->
<p>You can apply 77 spaces and have a single character, the pound sign or hash mark (#), as the 78th character of the string that <small>yes</SMALL> outputs. The object is to fill the entire row across the terminal with characters, so it is better to have 77 spaces than 10.</P>
<!-- CODE SNIP //-->
<pre>
                                                             #
                                                             #
                                                             #
                                                             #
                                                             #
                                                             #
</PRE>
<!-- END CODE SNIP //-->
<p>If a problem was to occur and the data wasn&#146;t coming across the line clean, you might see miscellaneous characters or a shortness of characters on some of the rows.
</P>
<!-- CODE SNIP //-->
<pre>
                                                               #
                                             ? ???             #
                                                         #
      ?? ?&#177;                  ??&lt;?????=????                 #
                      ???????                               #
                                                              #
</PRE>
<!-- END CODE SNIP //-->
<p><font size="+1"><b>Example Two: Testing by Monitoring</B></FONT></P>
<p>By executing some visual monitoring scripts and programs you can test the functionality of the emulation on your ASCII terminal. Some programs can be used to perform simple tests, such as the <small>clear</SMALL> command or even the <small>vi</SMALL> editor. Some third-party companies provide tools for interfacing with their applications in a non-graphical ASCII environment. These tools can also be used to run a quick test on the terminal&#146;s emulation.</P>
<p>There have been one or two occasions on some older flavors of UNIX in which the <small>getty</SMALL> daemon would die or stop functioning due to the lack of activity between the terminal and the daemon. A workaround was discovered by creating useful activities to keep the ASCII terminal busy and the daemon running.</P>
<p>If you are in a situation where an ASCII terminal on your system sits idle, you might want to set up a monitoring program that acts both as a benefit to you when making your preventative maintenance rounds and as a dog-and-pony show for those (such as management) who want to see the computer appear to be doing something visually. Another solution can help keep inexperienced operators off the system if you set up a simple monitoring script: An operator could watch the screen for problems and not even have to log in to the system. This is not true for all environments, but can be used in certain situations.</P>
<p>An excellent tool being shipped now with most new flavors of UNIX is the process monitoring program, <small>top</SMALL>. It is also available on the Internet. By using the necessary terminal emulation information, it formats system and process statistics nicely on the screen. You have to check whether <small>top</SMALL> is available in your flavor. It monitors the state of the CPU, uptime, memory, and processes that run on the system. This is a great tool to have running. It does eat up some CPU time, though, so keep this in mind. Large multiprocessing servers should not have any problems running this program.</P>
<!-- CODE //-->
<pre>
% top


9:44pm  up 81 days, 2:29, 1 user, load average: 0.12, 0.06, 0.04
40 processes: 39 sleeping, 1 running, 0 zombie, 0 stopped
CPU states:  0.0% user,  0.7% system,  0.0% nice, 99.3% idle
Mem: 47212K av, 46236K used,  976K free, 12776K shrd, 1180K buff
Swap:    0K av,    0K used,    0K free              38424K cached

USER   PID  PGRP   %CPU PROC  PRI  SIZE   RSS    TIME  COMMAND
admin 28084 28084   0.73   0   60   451   201    0:00  top
 root   681   681   0.35   *   60 11526   870    9:19  telnetd
 http 16995 16991   0.14   *   60  2781   994    0:23  syslogd
 root   935   200   0.12   *   60   595    74    0:13  httpd
 root   145     0   0.06   *   60   370    53    1:17  portmap
 root   649   200   0.04   *   60   424    54    3:22  fam
 root   159     0   0.04   *   60   367    36    0:41  ypbind
 root 27728   200   0.03   *   60   426    75    0:00  telnetd
 root     3     0   0.02   *   39     0     0    4:31  automount
 root   169     0   0.00   *   61     0     0    0:13  nfsd
 root   171     0   0.00   *   61     0     0    0:12  nfsd
</PRE>
<!-- END CODE //-->
<p>If <small>top</SMALL> is not available, a simple script works fine to monitor the system and to provide basic emulation testing, depending on the commands you send to it. The script consists of commands that you can use to monitor the system throughout the day. You can place technical data or basic information for yourself or for someone that might be walking by. Try to use commands that test the emulation of the ASCII terminal. The <small>monsys</SMALL> is a quick-and-dirty script that displays normal daily operation status and provides information as to what is happening on the system. In an endless loop, the script clears the display, executes a command, waits for five seconds, and repeats the same steps with a different command.</P>
<!-- CODE //-->
<pre>
% vi monsys

#! /bin/sh

while [ 1 ]; do
  clear; echo &#147;&#145;hostname&#145; - &#145;date&#145;&#148;; echo; uptime; sleep 5
  clear; cat /etc/motd; sleep 5
  clear; df -k; sleep 5
  clear; /sbin/ifconfig -a; sleep 5
  clear; netstat -rn; sleep 5
  clear; tail -15 /var/adm/SYSLOG; sleep 5
done
</PRE>
<!-- END CODE //-->
<p>Line 1: Define the shell to use for the script.
</P>
<p>Line 2: Begin the endless loop for displaying the information.</P>
<p>Line 3: Clear the screen, display the hostname, date, and uptime, and wait for five seconds.</P>
<p>Line 4: Clear the screen, display the messages for the day, and wait five seconds.</P>
<p>Line 5: Clear the screen, show the status of the filesystem, and wait five seconds.</P>
<p>Line 6: Clear the screen, display the current network interface settings, and wait five seconds.</P>
<p>Line 7: Clear the screen, display the current routing information, and wait five seconds.</P>
<p>Line 8: Clear the screen, output the last 20 lines of the system log file, and wait five seconds.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="07-05.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-07.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>