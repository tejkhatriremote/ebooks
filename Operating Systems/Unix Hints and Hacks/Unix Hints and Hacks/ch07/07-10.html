<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Displays and Emulations</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=07//-->
<!--PAGES=278-281//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="07-09.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-11.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p>The command to display a string in the titlebar is executed by running a simple <small>echo</SMALL> statement. You first <small>echo</SMALL> the escape (ESC) sequence. In some shells and editors, an escape character can be generated by typing Ctrl&#43;V (<small>^v</SMALL>). After the escape sequence, a semicolon is required in more recent versions of xterm and cannot be left off. For the string, the hostname of the system you are logged in to is displayed in the titlebar.</P>
<p>The digit <small>2</SMALL> indicates to the xterm to change only the title of the window. If the digit <small>0</SMALL> is used, the xterm changes both the title and the name that appears in the icon. When the digit <small>1</SMALL> is used, just the icon name is changed.</P>
<p>This process can be put into an alias for your favorite command to use. One such way is to display the current working directory in the titlebar every time you change the directory.</P>
<!-- CODE SNIP //-->
<pre>
alias cd &#145;cd \!*; echo -n ESC]2\;$cwd&#146;
</PRE>
<!-- END CODE SNIP //-->
<p>When the <small>cd</SMALL> command is issued, the shell changes to the directory entered, displays the directory on the titlebar, and displays it at the shell prompt.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>Administrators who constantly work on many workstations and servers throughout their environment need to constantly keep track of the system they are on.
</P>
<p><font size="+1"><b>Real World Experiences</B></FONT></P>
<p>There is a very high, and I mean <i>very</I> high, probability that you will accidentally reboot the wrong system. It happens, it shouldn&#146;t, but unfortunately it does. We have all done it at some point in our careers and have done it at the worst possible moment with critical jobs running. A constant reminder of where you are and what system you are on helps reduce the chances of an accident. Most admins say that only inexperienced administrators would make a mistake such as that. This might be true. Don&#146;t do it for yourself then; set this up for the others who are not so experienced who will be touching your root access. It might be an operator, a less-experienced administrator, or even a vendor. Reduce the chance of mistakes as much as possible.</P>
<p>I have had it happen that, when I wasn&#146;t looking, vendors or operators walk up to a system and attempt to halt it without realizing that they are actually on a remote server. Then the next thing I know, my phone goes crazy with calls from upset users. By seeing different hostnames on the windows that are running on the desktop, these people are able to verify that they are on the correct system. Never take any unnecessary risks when it comes to your systems.</P>
<h3><a name="Heading22"></A><font color="#000077">7.11 Control the Mouse with the Keyboard</FONT></H3>
<h4 align="LEFT"><a name="Heading23"></A><font color="#000077">7.11.1 Description</FONT></H4>
<p>Flavors: AT&ampT, BSD (with X11R6.1 or higher)
</P>
<p>If you have the X keyboard (XKB) extension, you have the ability to enable the mouse keys. This makes it possible to generate mouse motion and button events using the keyboard&#146;s numeric keypad. Any event generated by MouseKeys is completely transparent and works with any application that connects to a server with the X keyboard extension. The application itself doesn&#146;t even have to use XKB. To make this work you have to first set up the Num Lock key so that Shift&#43;Num Lock toggles the mouse keys.</P>
<!-- CODE SNIP //-->
<pre>
xmodmap -e &#147;keysym Num_lock = Num_Lock Pointer_EnableKeys&#148;
</PRE>
<!-- END CODE SNIP //-->
<blockquote>
<p><font size="-1"><hr><b>Note:&nbsp;&nbsp;</B>If you are using an earlier version of X, you will not have XKB and these instructions will not work.
</FONT><hr>
</BLOCKQUOTE>
<p>Press Shift&#43;Num Lock to activate the MouseKeys. The following are the default configurations that are set for moving around on the numeric keypad. These are used to substitute for the mouse:
</P>
<dl>
<dd>Arrow keys (2, 4, 6, and 8) move the pointer.
<dd>The 5 key behaves like the default pointer button.
<dd>The 0 key locks the default pointer button for dragging.
<dd>The . key unlocks the default pointer button to release a drag.
<dd>The &#43; key double-clicks the default pointer button.
<dd>The / key sets the default button to Button1.
<dd>The * key sets the default button to Button2.
<dd>The - key sets the default button to Button3.
</DL>
<p>Sometimes using Shift&#43;Num Lock does not work. In cases such as these, try using Alt&#43;Shift&#43;Num Lock to toggle to the MouseKeys. Check out the man page <small>xmodmap</SMALL>, because it has many options available for mapping keys and is a great resource.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>There are rare instances where a mouse can break, become inoperable, or become unplugged. By toggling the keyboard to act as a mouse, you can gracefully shut down applications as well as the system when needed.
</P>
<p><font size="+1"><b>Real World Experiences</B></FONT></P>
<p>Try to have this set up on as many systems as possible. I had a user who went all day without saving any of his work (like many users). While walking around his desk, he kicked the mouse cable and broke not only the connection but the mouse port on the computer. The frantic call came in and I was able to toggle the keyboard to control the cursor, save his data, shutdown the system, and swap out the bad hardware. By the way, his system now sits on his desk.
</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>xmodmap</SMALL></P>
<h3><a name="Heading24"></A><font color="#000077">7.12 Display from a Remote X Server</FONT></H3>
<h4 align="LEFT"><a name="Heading25"></A><font color="#000077">7.12.1 Description</FONT></H4>
<p>Flavors: AT&ampT, BSD
</P>
<p>Shell: csh</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
setenv DISPLAY <i>host</I><b>:0</B>
xhost [[&#43;-]host ...]
application<b> -display </B><i>host</I><b>:0</B>
</PRE>
<!-- END CODE SNIP //-->
<p>This is one thing that should become routine and second nature to you. There always comes a time as a UNIX system administrator when you will need to remotely log in to another host and display an X Window application back to your local host. You have to first allow access to be granted to the remote host to display X Window&#150;based applications on it. It is possible that the display is not even set. If it is not set, you will not be able to display any windows or applications.
</P>
<!-- CODE SNIP //-->
<pre>
rocket 10% xhost
xhost: unable to open display &#147;&#148;
</PRE>
<!-- END CODE SNIP //-->
<p>Use the command <small>xhost</SMALL> by itself to the determine if any hosts are allowed to display back to a local host you are on. In this case, no remote hosts are allowed to display on the desktop of host <small>rocket</SMALL>.</P>
<!-- CODE SNIP //-->
<pre>
rocket 11% xhost &#43;planet
planet being added to access control list
</PRE>
<!-- END CODE SNIP //-->
<p>Using a plus sign (&#43;) with the remote hostname adds a host to the access list. The host <small>planet</SMALL> is now added to <small>rocket</SMALL>&#146;s local access control list. This means that anyone on the host <small>planet</SMALL> can display any X Window applications on the desktop of <small>rocket</SMALL>. Use the <small>xhost</SMALL> command by itself again to display the current access list of remote hosts that can display X sessions on the local system.</P>
<!-- CODE SNIP //-->
<pre>
rocket 12% xhost
INET:rocket
INET:planet
INET:localhost
LOCAL:
</PRE>
<!-- END CODE SNIP //-->
<p>You can see that the host <small>planet</SMALL> is included in the access control list with network access to write X Window applications over the network to the host <small>rocket</SMALL>. It is also possible to grant permission to any host that wants to display on the local system by passing a &#43; sign without a hostname to the <small>xhost</SMALL> command. This is considered dangerous because it permits anything to be displayed by anybody on the local host.</P>
<!-- CODE SNIP //-->
<pre>
% xhosts &#43;
access control disabled, clients can connect from any host
</PRE>
<!-- END CODE SNIP //-->
<p><br></P>
<center>
<table border>
<tr>
<td><a href="07-09.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="07-11.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>