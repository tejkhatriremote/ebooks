<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Topics in Administration</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=01//-->
<!--PAGES=028-032//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="01-05.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="01-07.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>Each example shows how I have used this command in the past. It is a useful and powerful tool when you have multiple isolated systems to support and you cannot stay logged in to more than one at a time. This command also helps to let an overworked administrator go home while jobs are running that have been manually started.
</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<!-- CODE SNIP //-->
<pre>
find, nohup, nice, rsh
</PRE>
<!-- END CODE SNIP //-->
<h3><a name="Heading18"></A><font color="#000077">1.9 Redirecting Output to Null</FONT></H3>
<h4 align="LEFT"><a name="Heading19"></A><font color="#000077">1.9.1 Description</FONT></H4>
<p>Data that is sent to standard out can be discarded when sent to the character device null.
</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
<i>command</I> &gt; <b>/dev/null</B>
<i>program</I> &gt;  <b>/dev/null</B>
<b>cat</B> <i>filename</I> &gt; <b>/dev/null</B>
cp <i>filename</I> <b>/dev/null</B>
<b>ln</B> -s <b>/dev/null</B> <i>file</I>
</PRE>
<!-- END CODE SNIP //-->
<p>null discards all data passed to it. The most popular way to redirect data to null is by using the greater than sign: <small>&gt;</SMALL>. There are other ways to get rid of data using null without using the redirect to pass the data to it. One way is to create a soft link to the device or copy a file to the device. It is also possible to alias incoming mail to be sent to the device. Here is how some of these methods work.</P>
<p><font size="+1"><b>Example One: Basic Command Redirection to null</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
$ ls -l /etc | tee /tmp/root.txt &gt; /dev/null
</PRE>
<!-- END CODE SNIP //-->
<p>This command takes a listing of the /etc directory, saves it into the file /tmp/root.txt, and sends what would normally be displayed to standard out, where it gets discarded and is never seen.
</P>
<p><font size="+1"><b>Example Two: Basic Program Redirection to null</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
$ /usr/local/bin/build_report.sh &lt; /dev/null
</PRE>
<!-- END CODE SNIP //-->
<p>The output generated by programs <i>might</I> be unnecessary at times. This can include errors, debugging information, or an excessive amount of data that is of no concern. This type of data is best redirected to /dev/null.</P>
<p><font size="+1"><b>Example Three: Zero a File with null</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
# cat /dev/null &gt; /usr/adm/error.log
</PRE>
<!-- END CODE SNIP //-->
<p>This is one of the safest ways to zero a file out. Because there are no contents in null (zero), you can make the file have a size of zero without closing the file.
</P>
<p>This is important because if the file is currently in an open state by a process, the process remains unaffected but the file ends up with file size equal to zero. This technique works very well when it comes time to zero out the files in the /var/adm directory.</P>
<p><font size="+1"><b>Example Four: Copy null into a File</B></FONT></P>
<p>Flavors: AT&T and BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
# cp /dev/null /usr/local/app/error.log
</PRE>
<!-- END CODE SNIP //-->
<p>This use of the <small>copy</SMALL> command has the same affect as example three and the <small>cat</SMALL> redirect method.</P>
<p><font size="+1"><b>Example Five: Linking to null</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
# rm /usr/local/app/error.log
# ln -s /dev/null /usr/local/app/error.log
</PRE>
<!-- END CODE SNIP //-->
<p>If there are log files that you don&#146;t want to have to deal with time and time again, remove them and create a soft link from the file to null. When this is in place, example three will have to be done on a routine basis, because otherwise it fills up the disk. Make sure that no processes have the file open when it is removed. It is not advisable to use this technique on any of the files within the directories /var/adm, /usr/adm, /var/spool, and /var/spool.
</P>
<p><font size="+1"><b>Example Six: Redirecting Mail to null</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<p>An alias entry in the /etc/aliases file can redirect incoming mail to null.</P>
<!-- CODE SNIP //-->
<pre>
# vi /etc/aliases
</PRE>
<!-- END CODE SNIP //-->
<p>Step 1: Edit the /etc/aliases file.
</P>
<!-- CODE SNIP //-->
<pre>
# ident    @(#)aliases    1.13    92/07/14

#   &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   The program &#147;newaliases&#148; will have to be run after
#   &gt; NOTE &gt;   this file is updated for any changes to
#   &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   show through to sendmail

nobody: /dev/null
</PRE>
<!-- END CODE SNIP //-->
<p>Step 2: Make the necessary changes to the file.
</P>
<p>Step 3: Run <small>newaliases</SMALL> (Always run <small>newaliases</SMALL>, it tells mail to reread this file)</P>
<p>This is one way to disable users&#146; email access while maintaining their accounts&#146; activity. Another good use for this technique is for controlling inbound spam. You can redirect spam to null and never worry about it taking up disk space on your system.</P>
<p><font size="+1"><b>Example Seven: Schedule cron to Redirect Output to null.</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>Shells: All</P>
<!-- CODE SNIP //-->
<pre>
0 22 * * * /bin/sh /usr/local/bin/backup_full.sh 2&gt;&amp1 &gt; /dev/null
</PRE>
<!-- END CODE SNIP //-->
<p>The previous example is a crontab entry that runs a scheduled full backup in which cron redirects any errors or messages to null. A crontab is one of the best uses for redirecting output to null. If any output by a process is executed by a cron job, that output is sent to the user who owns the scheduled cron job. When null is set up for the command in the crontab, whatever would be sent to standard out and emailed to the user is discarded.
</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>By now the many uses for using /dev/null should be clear. Whether it&#146;s to zero a file or to get rid of unwanted data, null can have a wide range of uses for a UNIX administrator. It keeps your mailbox free of worthless mail, keeps your log files under control, and zeroes important files safely.
</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>In my early years as an administrator, database applications were locked to open log files. These files would grow to enormous sizes and fill up a filesystem in a matter of days. By simply removing log files that were open by the database applications with the remove (<small>rm</SMALL>) command, I caused the application to crash rather severely. I learned quickly that redirecting null using the <small>cat</SMALL> command kept the DBAs (database administrators) away from my desk, and the dirty looks stopped.</P>
<p>One of the most annoying things is to find out that your filesystem has run out of disk space because a log file grew over 200MB during the weekend while you were out. Clear these logs out by redirecting them to /dev/null.</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<!-- CODE SNIP //-->
<pre>
aliases, null, cron, crontab
</PRE>
<!-- END CODE SNIP //-->
<h3><a name="Heading20"></A><font color="#000077">1.10 Keeping Remote Users Out</FONT></H3>
<h4 align="LEFT"><a name="Heading21"></A><font color="#000077">1.10.1 Description</FONT></H4>
<p>There are various ways to keep remote users out of the system when you have tasks to perform that make that necessary. The following are a few ways to keep them out so you can get your work finished.
</P>
<p><font size="+1"><b>Example One: Single User Method</B></FONT></P>
<p>Flavors: AT&T, BSD
</P>
<p>If the task being performed requires that you bring the system into a single-user state, you have nothing to worry about. In a single user state the network never gets initialized, so no users can get to the system. If you want to work in a single-user state and have the network initialized, you can always execute the networking command manually from a shell and apply one of the other examples that follow in conjunction with this example.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="01-05.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="01-07.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>