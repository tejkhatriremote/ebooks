<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:File Management</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=06//-->
<!--PAGES=210-213//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="06-04.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="06-06.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><font size="+1"><b>Example Three: Extra Filesystems with tmp</B></FONT></P>
<p>Flavors: AT&ampT, BSD
</P>
<p>Now that there is an increase of available disk capacity on a single disk, multiple disks and raid arrays are becoming more prevalent than ever before. It is a good idea to create at least one temporary area on any one of the un-system-related filesystems. If you have multiple volumes or filesystems like /vol01, /vol02, and /vol03, select one that might not fill up as fast as the others and make a temporary directory within it (that is, /vol02/tmp).</P>
<p>This new area can be designated just for the users. This temporary area is perfect for the users to use or throw whatever files, extraneous code, and data that they want to temporarily work with. Make it known to the users that this area is set up just for them. They need to be informed that they can work in this area and stay out of /tmp or /usr/tmp, they will not be affecting the system disks in any way, and they might also show an increase in performance if they stay in the designated temporary area you set up for them. Users always like to hear about anything that might show an increase in performance to their system.</P>
<p>In many cases you don&#146;t know what the user is up to or what programs they are running or trying to run. Unlike /tmp and /usr/tmp, which can have files removed on a regular basis, the removal of data here can be handled in two ways. If the disk utilization meets a certain threshold, like 95%, files older that 3&#150;7 days can be removed. You can also set up the crontab to remove data older than <i>n</I> days on a weekly basis. Check with the main user or project leader of the system to find out which method they would prefer.</P>
<p>If this area can be viewed by many workstations over NFS mount points, you might want to put files that are of interest to many users in this area. Many times large files on the Internet can be of interest to users. These sometimes can be files or programs that more than one user will want to see but not keep. Sometimes many users want to view large and popular QuickTime movie files. It is best to take a proactive approach and place these files into the temporary area so that you don&#146;t have so many copies of a large redundant file sitting all around your system. You can do the math of a 30MB file with 100 users each wanting a copy. Think of all the wasted tape you will be using for backups and disk space. Check with management first.</P>
<p>In many cases, downloading these types of files is prohibited by company policy. Management has been known to be lenient depending on the environment and the content of the material. Typically it is nonpornographic material and isn&#146;t in poor taste. It can also be justified by explaining the amount of disk space, tapes, and time that potentially could be wasted by their employees. If any disks have filled up in the past due to a similar instance, you should notify management that this could be a way of preventing this sort of thing from happening again.</P>
<p><font size="+1"><b>Example Four: User&#146;s Temporary Directory</B></FONT></P>
<p>Flavors: AT&ampT, BSD
</P>
<p>Setting up a temporary area in a user&#146;s home directory works very well to keep the user out of the system&#146;s temporary directories. Users can place any downloaded files or data they are temporarily working with in this area. Eventually disk space fills up; when it does and the call goes out to clean up files, users can go straight to their temporary area and clean up these files first.</P>
<p>This is sometimes a cleaner alternative to one large temporary area on an extra filesystem for many to share. If a large number of people are accessing the one shared area, some begin to look elsewhere for other places to start dumping files.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>There is never a user who keeps things forever; everyone needs a place to occasionally dump their junk files. A directory for temporary storage is necessary for the user and its location can be vital to the integrity of the system.
</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>Users often need to be told where to put files, and you need to be the one to tell them. If you configure the system, you should know what&#146;s best. When users do not have any place to store things temporarily, they have a tendency to begin creating frivolous and meaningless directories throughout the system. Administering and cleaning up these directories and files become a nightmare.
</P>
<p>Backups should never be done on any temporary directories or files unless specifically requested by a user. If it is requested, try to make it clear that these backups will take place for only <i>n</I> days and then will cease to exist. In a year&#146;s time, performing backups on these areas could run to gigabytes of worthless space and data.</P>
<p>When you are working with temporary directories, keep in mind some of the basic rules that should be covered.</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;/tmp should always remain on the system drive and never be linked to a filesystem that is not part of the system drive.
<dd><b>&#149;</B>&nbsp;&nbsp;/usr/tmp and any symbolic links for it, should always remain on the system drive. It can have a symbolic link to other filesystems not on the local system drive, but at a risk to the systems services.
<dd><b>&#149;</B>&nbsp;&nbsp;/tmp and /usr/tmp should never be NFS mounted.
<dd><b>&#149;</B>&nbsp;&nbsp;/tmp should never be linked to /usr/tmp and /usr/tmp should never be linked to /tmp.
<br>Temporary directories in multiple un-system-related filesystems can be linked to another drive local to the system or even across an NFS-mounted filesystem with little-to-no risk to the system.
<dd><b>&#149;</B>&nbsp;&nbsp;/usr/tmp should not be linked to an extra shared temporary directory on another filesystem.
</DL>
<h3><a name="Heading8"></A><font color="#000077">6.4 Dealing with Symbolic Links</FONT></H3>
<h4 align="LEFT"><a name="Heading9"></A><font color="#000077">6.4.1 Description</FONT></H4>
<p>Symbolic links can be extremely useful and can also provide a massive cross-link headache for an administrator. How they are used can increase the efficiency of your environment.
</P>
<p><font size="+1"><b>Example One: Linking System Files and Directories</B></FONT></P>
<p>Flavors: AT&ampT, BSD
</P>
<p>It is perfectly fine to create symbolic links for system directories such as, /bin, /sbin, /usr, and /var. They should always be linked to a directory or partition that is on the system disk. If the link is to a directory on a second disk and that second disk goes offline, the system might not be able to boot in to a multiuser or even a single user state. In many flavors of UNIX, the kernel uses these areas during boot time and, if they cannot be seen, the system will not boot.</P>
<p>If system files, such as /lib/sendmail.cf and other configuration files are linked to other disks and filesystems, certain services like mail might never get started if the filesystem has problems getting mounted. Always try to keep the symbolic links on the same filesystem and disk drive that the file currently resides on. If you don&#146;t, you only add one more possible level of failure and put your system at risk.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="06-04.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="06-06.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>