<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:File Management</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=06//-->
<!--PAGES=244-246//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="06-13.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="../ch07/07-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><font size="+1"><b>Example Two: Decoding a Binary File</B></FONT></P>
<p>Flavors: AT&ampT, BSD
</P>
<p>Syntax:</P>
<!-- CODE SNIP //-->
<pre>
uudecode [file]
</PRE>
<!-- END CODE SNIP //-->
<p>Most of the email clients today can interpret an encoded message that was made with the <small>uuencode</SMALL> command and translate the ASCII text back into a binary format. For those readers that can&#146;t, you have to do it manually.</P>
<p>The manual process is a simple task of writing the email message out to a file, stripping the header information and running <small>uudecode.</SMALL> After you write out the email message it should have all the header information attached to the uuencoded file.</P>
<!-- CODE //-->
<pre>
planet 20% vi /usr/tmp/top.tmp

&gtFrom xinu@ugu.com  Sat Nov 28 23:34:44 1998
Received: from mail.ugu.com (0@mail.ugu.com [204.128.192.15]) by
<b>&#8658;</B> foo.com (8.8.8/8.7.6)
with ESMTP id XAA07347 for &ltfriend@foo.com&gt; Sat, 28 Nov 1998
<b>&#8658;</B> 23:34:42 -0500 (EST)
Received: from ugu.com (ugu.com [206.18.19.10])
      by mail.ugu.com (8.9.1/8.9.1) with ESMTP id UAA12667
      for &ltfriend@foo.com&gt; Sat, 28 Nov 1998 20:34:41 -0800 (PST)
Received: (from xinu@localhost)
        by ugu.com (8.9.1/8.9.0) id UAA110274
        for friend@foo.com; Sat, 28 Nov 1998 20:35:05 -0800 (PST)
Date: Sat, 28 Nov 1998 20:35:05 -0800 (PST)
From: UGU &ltxinu@ugu.com&gt
Message-Id: &lt199811290435.UAA110274@ugu.com&gt
Status: O
begin 755 top.new
M?T5,1@$&#148;&#145;0&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#148;&#145;&#145;@&#145;&#145;&#145;&#145;!$&#145;&#145;9=&#145;&#145;&#145;&#145;#0&#145;&#145;&#146;C0(&#145;&#145;&#145;)&#145;&#145;T&#145;&#148;&#145;&#145;
M!P&#145;H&#145;!@&#145;%P&#145;&#145;&#145;&#145;8&#145;&#145;&#145;&#145;T$&#145;&#145;&#145;-!&#145;&#145;&#145;#0&#145;&#145;&#145;#@&#145;&#145;&#145;&#145;X&#145;&#145;&#145;&#145;&#145;0&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;P&#145;&#145;
M&#145;100&#145;&#145;$4$&#145;&#145;!%&#145;&#145;&#145;&#145;!$&#145;&#145;&#145;&#145;1&#145;&#145;&#145;&#145;!&#145;&#145;&#145;&#145;&#145;%P&#145;&#145;&#145;&#148;&#145;&#145;&#145;!*!&#145;&#145;&#145;2@0&#145;&#145;$H&#145;&#145;&#145;&#145;
.
.
.
M&#145;*$&#145;&#145;&#145;&#145;(&#145;&#145;&#145;&#145;&#145;Q&#145;!:&#148;&#145;&#145;&#145;&amp@@&#145;&#145;&#145;%Y&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;%M&lt&#145;&#145;&#145;
M&#146;@@&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;!P&#145;&#145;&#145;&#145;!S&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;!E&#145;&#145;&#145;&#145;&#145;,&#145;&#145;&#145;&#145;&#145;
&lt&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;=S&#145;&#145;&#145;&#145;&amp&gt&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;
&#145;
end
</PRE>
<!-- END CODE //-->
<p>Bring the email message file into an editor, and delete all email header information that exists before the line that starts with the word <small>begin.</SMALL></P>
<!-- CODE //-->
<pre>
begin 755 top.new
M?T5,1@$&#148;&#145;0&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#148;&#145;&#145;@&#145;&#145;&#145;&#145;!$&#145;&#145;9=&#145;&#145;&#145;&#145;#0&#145;&#145;&#146;C0(&#145;&#145;&#145;)&#145;&#145;T&#145;&#148;&#145;&#145;
M!P&#145;H&#145;!@&#145;%P&#145;&#145;&#145;&#145;8&#145;&#145;&#145;&#145;T$&#145;&#145;&#145;-!&#145;&#145;&#145;#0&#145;&#145;&#145;#@&#145;&#145;&#145;&#145;X&#145;&#145;&#145;&#145;&#145;0&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;P&#145;&#145;
M&#145;100&#145;&#145;$4$&#145;&#145;!%&#145;&#145;&#145;&#145;!$&#145;&#145;&#145;&#145;1&#145;&#145;&#145;&#145;!&#145;&#145;&#145;&#145;&#145;%P&#145;&#145;&#145;&#148;&#145;&#145;&#145;!*!&#145;&#145;&#145;2@0&#145;&#145;$H&#145;&#145;&#145;&#145;
.
.
.
M&#145;*$&#145;&#145;&#145;&#145;(&#145;&#145;&#145;&#145;&#145;Q&#145;!:&#148;&#145;&#145;&#145;&amp@@&#145;&#145;&#145;%Y&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;%M&lt&#145;&#145;&#145;
M&#146;@@&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;!P&#145;&#145;&#145;&#145;!S&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;!E&#145;&#145;&#145;&#145;&#145;,&#145;&#145;&#145;&#145;&#145;
&lt&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;=S&#145;&#145;&#145;&#145;&amp&gt&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;&#145;$&#145;
&#145;
end
</PRE>
<!-- END CODE //-->
<p>Now that the email message looks like a uuencoded file, write the file out with the .uu extension appended to the end.
</P>
<!-- CODE SNIP //-->
<pre>
:w! /usr/tmp/top.uu
</PRE>
<!-- END CODE SNIP //-->
<p>From the vi editor the <small>w!</SMALL> forces the file to be written out as /usr/tmp/top.uu, as long as you have the permission in the directory to do so.</P>
<!-- CODE SNIP //-->
<pre>
planet 21% ls -l top*
-rw-------  1 xinu         44694 Nov 28 23:59 top.tmp
-rw-r--r--  1 xinu         43963 Nov 29 00:00 top.uu
</PRE>
<!-- END CODE SNIP //-->
<p>Run the <small>uudecode</SMALL> command on the file /usr/tmp/top.uu to decrypt the file into its original binary state.</P>
<!-- CODE SNIP //-->
<pre>
planet 22% uudecode top.uu
planet 23% ls -al top*
-rwxr-xr-x  1 xinu         31888 Nov 29 00:00 top.new*
-rw-------  1 xinu         44694 Nov 28 23:59 top.tmp
-rw-r--r--  1 xinu         43963 Nov 29 00:00 top.uu
</PRE>
<!-- END CODE SNIP //-->
<p>When the file is uudecoded the file binary file takes on the name and the permissions passed on to it from the <small>uuencode</SMALL> command.</P>
<blockquote>
<p><font size="-1"><hr><b>Note:&nbsp;&nbsp;</B>In some flavors of UNIX, the uudecode command strips out the header information for you. Try it on your flavor first.</FONT><hr>
</BLOCKQUOTE>
<p>There is a nice tool available on the Internet called <small>uudeview</SMALL> that not only strips out any header information and performs a <small>uudecode</SMALL>, but also handles various decompression formats.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>Many administrators forget about the use and benefit of <small>uuencoding</SMALL> files. Because newer mail clients handle the translation automatically, the newer administrators get lazy and forget about the <small>uuencode</SMALL> and <small>uudecode</SMALL> commands.</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>There are no real tools in DOS to extract a <small>uuencoded</SMALL> file. When binary files are emailed across the network they are <small>uuencoded.</SMALL> Decoding the file back to its original state is all handled by the mail client. Most administrators working in the PC world are unaware that these files are actually encrypted by <small>uuencoding</SMALL> them. They understand only that it is a binary program that has been encrypted into an ASCII format. If a malformed email ends up hanging your SMTP mail gateway, a UNIX system administrator would have to figure out that a 50MB movie file of a pornographic nature is holding up the entire company from getting its email.</P>
<p>The <small>uuencode</SMALL> command can work well by adding another level of security. You can take a compressed binary file and uuencode it, split the file every 1000 lines (see section 6.11 &#147;Splitting Files&#148;), and email all the split pieces to a destination address. The file will have to be appended back together in the correct order, uudecoded, and uncompressed back to its original state.</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>uuencode, uudecode, mail</SMALL></P>
<p>World Wide Web:</P>
<p>uudeview&#151;<a href="http://www.informatik.uni-frankfurt.de/~fp/uudeview/">http://www.informatik.uni-frankfurt.de/~fp/uudeview/</A></P><p><br></P>
<center>
<table border>
<tr>
<td><a href="06-13.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="../ch07/07-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>