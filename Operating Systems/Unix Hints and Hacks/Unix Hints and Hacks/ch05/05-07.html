<html>
<head>
<meta name=vsisbn content="0789719274">
<meta name=vstitle content="Unix Hints & Hacks">
<meta name=vsauthor content="Kirk Waingrow">
<meta name=vsimprint content="Que">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="04/20/99">
<meta name=vscategory content="Operating Systems: UNIX">




<title>UNIX Hints and Hacks:Account Management</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0789719274.gif" width=60 height=73 alt="Unix Hints & Hacks" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Unix Hints & Hacks</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Kirk Waingrow</i>
    <br>
    Que,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;0789719274<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;04/20/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0789719274//-->
<!--TITLE=UNIX Hints and Hacks//-->
<!--AUTHOR=Kirk Waingrow//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=que//-->
<!--CHAPTER=05//-->
<!--PAGES=176-179//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="05-06.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="05-08.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p>If you decide to use one of these packages, do extensive testing of the program before you use it. Any program or application that manipulates the password file on your system should be thoroughly tested. If you are able to obtain the source code for a program, scan the code if you have the experience to verify that the source doesn&#146;t damage your system or environment on a local or wide scale.
</P>
<p><font size="+1"><b>Example Three: From a Command Prompt</B></FONT></P>
<p>Platform: AT&T, BSD
</P>
<p>The process of adding user accounts has never changed over the years, right down to the format of the password file. The concept on almost all flavors of UNIX remains the same. A user can be added by following these seven steps:</P>
<dl>
<dd><b>1.</B>&nbsp;&nbsp;Edit the password file and create the required seven fields.
<dd><b>2.</B>&nbsp;&nbsp;Set the password!
<dd><b>3.</B>&nbsp;&nbsp;Add a new GID to the group file if a new number is defined.
<dd><b>4.</B>&nbsp;&nbsp;Create a home directory for the user.
<dd><b>5.</B>&nbsp;&nbsp;Change the permissions and the ownership to the user ID on the home directory.
<dd><b>6.</B>&nbsp;&nbsp;Create or copy any necessary startup files that might be needed or required for the user
<dd><b>7.</B>&nbsp;&nbsp;Test the account!
</DL>
<p>You have greater flexibility by creating an account manually than you have by using a program or a GUI. By doing it manually, you have the ability to manipulate the password file, home directories, and startup files to a greater extent than you would otherwise. Although GUI vendors try to evaluate many environments and attempt to provide you with the tools to satisfy their needs, your environment might not fall into these categories.
</P>
<p>You might have power users such as engineers and programmers who often prefer public domain shells such as bash and tcsh, among others, to work in. In many cases, the GUIs for those shells force you to use a predetermined list to select from and you must go into the password file after the account is created and redefine the shell or use the <small>chsh</SMALL> command. When these predetermined shells are selected in the GUI or from within a program, they often copy a set of startup files that are executed when the user logs in. Creating the account manually gives you greater control over what startup files the user has. You can select those that work best in your environment and can copy them into their home directories.</P>
<p>In addition, you are not limited in the placement of the home directory on the system when you build the account manually. If you want the home directory to reside over an NFS mount point, through a softlink to another filesystem, or to another nonstandard area, you have the ability to place it there without being hit with <small>Invalid Entry</SMALL> error messages. After the home directory is created you can set it with the permissions that meet your standards.</P>
<p>The level of security you want, your environment, and your users all dictate what level of permissions need to be set up.</P>
<p>You can manually go into the password file and create or modify accounts to have the same UIDs (see the section &#147;Delegating root to Multiple Admins&#148; in Chapter 3, &#147;Security,&#148; for more information). However, this can have serious repercussions for both root and user accounts. Think first how your environment will be affected and if it is the proper solution to satisfy your needs. The potential for problems is the reason that GUIs and other programs do not allow this.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>There are several ways an account can be created. Some are more flexible then others, but all offer the same result in the end: to provide a user with a means to log in to the system.
</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>When setting up accounts for users, keep in mind that users don&#146;t change, modify, or add anything in their accounts until they get comfortable with their settings and environment. For this reason, assign users a good temporary password that they can change. Most support people provide users with easy-to-remember and easy-to-crack temporary passwords such as <i>12345, mike1</I>, and <i>ekim</I>. Give them real passwords. If you give them a good, tough-to-crack passwords and they don&#146;t like them, the users are more likely to change them quickly to passwords of their own. If you do decide on a hard-to-crack, fixed, temporary password such as <i>1x7fee5</I>, make sure you add it to the dictionary file that is part of the cracking program. That way you know who still needs to change their existing passwords.</P>
<p><font size="+1"><b>Other Resources</B></FONT></P>
<p>Man pages:
</P>
<p><small>admintool, chsh, cpeople, passwd, sam, smit</SMALL></P>
<h3><a name="Heading18"></A><font color="#000077">5.9 User Account Startup Files</FONT></H3>
<h4 align="LEFT"><a name="Heading19"></A><font color="#000077">5.9.1 Description</FONT></H4>
<p>After the login process begins, certain startup files are processed (depending on the login shell that is selected).
</P>
<p>Flavors: AT&T, BSD</P>
<p>Shells: ksh, sh</P>
<p>When the Bourne shell is used, the .profile startup file is processed. This file contains all information and settings for the terminal settings, the environment variables, path, and other general settings.</P>
<p>Shell: csh</P>
<p>The C shell uses two separate startup files and a logout file. The .login file sets up all the necessary terminal characteristics along with the environment variables. The .cshrc file sets the path that commands search, global variables (applications, history, and prompt), the <small>umask</SMALL> value, and the user&#146;s personal aliases. When the logout process begins, the .logout file is processed. Entries in this file generally clear the screen, send reminder messages, and can run any scripts on leaving the system.</P>
<p>Other shells make use of the similar features. The tcsh shell uses .tcshrc, and bash uses .bashrc to configure all the user control settings. Many of the startup files end in the letters <i>rc</I> (run command), containing a series of commands that are run at the startup of a shell.</P>
<p><font size="+1"><b>Reason</B></FONT></P>
<p>Startup files are important to every shell that runs. They set the terminal settings and environment variables so the window manager knows what to do. Without proper startup files, programs might never be located because there is no path to them.
</P>
<p><font size="+1"><b>Real World Experience</B></FONT></P>
<p>I typically set up two sets of startup files for each environment I work in, and store them in /usr/local/etc. One set is the generic system startups that can be found in the root directory on any flavor. It is the startup files that the account root uses. These are raw untouched startup files that are compatible for anyone to use. When a new user gets an account, I copy duplicates of these files into his or her home directory.
</P>
<p>The second set of startup files is customized for the individual environment, not the individual user. These files contain special variable definitions for software licenses, applications, custom path definitions, and aliases that pertain directly to a set of users. An entry is usually made near the bottom of their generic startup files to reference (or <i>source</I>) the customized files.</P>
<p>When this is finished, if a user modifies the startup files on her own to personalize them, she is encouraged to start at the bottom of the files. When the phone rings and the user cannot log in to her account, you can easily comment out her additions and discover what entry is preventing the user from logging into the system.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="05-06.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="05-08.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>