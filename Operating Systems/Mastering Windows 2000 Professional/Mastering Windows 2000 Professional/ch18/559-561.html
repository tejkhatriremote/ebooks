<html>
<head>
<meta name=vsisbn content="0782124488">
<meta name=vstitle content="Mastering Windows 2000 Professional">
<meta name=vsauthor content="Mark Minasi, Todd Phillips">
<meta name=vspublisher content="Sybex, Inc.">
<meta name=vspubdate content="01/01/00">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Mastering Windows 2000 Professional:Understanding the Architecture</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//--></script>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0782124488.gif" width=60 height=73 alt="Mastering Windows 2000 Professional" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Mastering Windows 2000 Professional</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Mark Minasi, Todd Phillips</i>
    <br>
    Sybex, Inc.
    <br>
    <b>ISBN:</b>&nbsp;0782124488<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;01/01/00</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0782124488//-->
<!--TITLE=Mastering Windows 2000 Professional//-->
<!--AUTHOR=Mark Minasi//-->
<!--AUTHOR=Todd Phillips//-->
<!--PUBLISHER=SYBEX//-->
<!--CHAPTER=18//-->
<!--PAGES=559-561//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="556-559.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="561-563.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<h4 align="LEFT"><a name="Heading16"></A><font color="#000077">NT 4&#146;s Additional Architectural Change</FONT></H4>
<p>All this discussion of where different operating system pieces should go is particularly relevant to NT Workstation 4. Prior to this release, Microsoft put the Windows NT native programming subsystem, the Win32 API, out in User mode&#151;but with NT 4, Win32 moved to Kernel mode.
</P>
<p>Microsoft says it made the change to improve NT&#146;s performance as a workstation operating system, and the switch did, indeed, improve NT&#146;s performance. Animation-based Windows 3.1 programs that ran painfully slowly under Windows NT 3.51 and earlier versions now run at about the same speed under NT Workstation 4 as they do under Windows 95.</P>
<p>Mainly, there were three pieces of NT that moved from User mode to Kernel mode:</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;USER, the user interface manager
<dd><b>&#149;</B>&nbsp;&nbsp;GDI, the graphics manager
<dd><b>&#149;</B>&nbsp;&nbsp;The video display drivers
</DL>
<p>USER is a set of routines that responds every time a user clicks or drags a user control. (<i>Control</I> is the generic phrase for a window, button, slider bar, radio button, check box, list box, combo box, or toolbar.) The <i>Graphics Device Interface</I> (GDI) is a set of routines that handles much of the low-level work required to keep a graphical user interface going. GDI routines manipulate bitmaps, colors, cursor shapes, icons, and fonts. Every time your word processor wants to show you a line of text in Times Roman, GDI puts those characters on the screen.</P>
<blockquote>
<p><font size="-1"><hr><b>NOTE:&nbsp;&nbsp;</B>Whenever you load a bitmap as wallpaper, you see another example of GDI at work.<hr></FONT>
</BLOCKQUOTE>
<p>Both GDI and USER are central, integral parts of Windows NT and they&#146;re pretty well debugged. Putting them into Kernel mode, then, is probably a good idea. But the display drivers, well, that&#146;s another story...
</P>
<p>We&#146;ve already said that the only times we have ever seen NT crash is when we&#146;ve loaded a badly written SCSI or EIDE driver. Because those drivers are part of the I/O Manager, they live in Kernel mode, which is why they can bluescreen the system when they fail.</P>
<p>Display drivers, in contrast, haven&#146;t been able to kill a Windows NT machine in previous versions, which is no longer true in version 4 because the display drivers now live in Kernel mode. Again, a reasonable person could say, &#147;Hey, wait a minute, <i>who cares</I>? After all, what can you get done on a computer that doesn&#146;t have a display driver?&#148; And again, we answer that a server has very little use for a display driver. NT Server works just fine no matter how strange the screen looks; after all, the file and application server part comes up automatically, and you needn&#146;t even log into an NT Server machine for it to act as a file server.</P>
<p>Our worry is that display drivers are, like disk drivers, often not written by people inside Microsoft, and so they don&#146;t get tested as well. Not, mind you, that Microsoft is any paragon of virtue when it comes to bug-free code&#151;although NT&#146;s pretty darn good that way&#151;but because a Microsoft tester has access to thousands of different machines, a huge network, and the ear of people with intimate knowledge of the innards of NT. A Microsoft tester is in a good position to beat the stuffing out of a display driver. In contrast, a display driver programmer at a video board company wouldn&#146;t have access to nearly that number of resources. When working at a company whose focus is hardware, testers often see software drivers as a kind of necessary evil&#151;and the result is a display driver that hasn&#146;t been properly tested.</P>
<p>So, in the end analysis, what&#146;s the best course of action for <i>you</I>? Well, ultimately, Microsoft&#146;s decision to put the Win32 subsystem into Kernel mode means that we&#146;ll all get a snappier response out of our desktop applications on NT 4. Yes, it probably means some small reduction in stability in NT, but that problem probably comes from the drivers. We suggest, therefore, confining video board purchases to the boards on the Hardware Compatibility List (HCL)&#151;they&#146;ve been beaten around and are presumably fairly trustworthy.</P>
<p>What this change will mean to Windows 2000 remains to be seen. We have definitely seen some improvements in performance moving from NT 4 to Windows 2000, with no great decrease in stability. Indeed, NT 4 has proven to be quite stable, so long as you take care in selecting your drivers. With the unified driver model, the Windows 98 and Windows 2000 drivers being the same, it&#146;s probably safe to assume that the drivers will see extensive testing before they are released.</P>
<h3><a name="Heading17"></A><font color="#000077">Working with Windows 2000&#146;s Major Modules</FONT></H3>
<p>By now, you&#146;ve met some of Windows 2000&#146;s major components. But we haven&#146;t been able to work <i>all</I> of them into the discussion yet, so let&#146;s make amends for that now.</P>
<h4 align="LEFT"><a name="Heading18"></A><font color="#000077">The HAL, Kernel, and I/O Manager</FONT></H4>
<p>The HAL, Kernel, and I/O Manager are some of the pieces of Windows 2000 you&#146;ve already met. The HAL enables many dissimilarly designed computers to look alike to Windows 2000. The HAL also smooths out any differences created by running Windows 2000 with a single processor on some machines and up to 64 processors on other machines.
</P>
<p>The Kernel is the central manager, the part that knows at any moment what processes are running in the system, what memory they take up, what their priority is, and what (if anything) they&#146;re waiting for. Part of the system&#146;s memory management takes place in the Kernel as well, and you&#146;ll read about how Windows 2000 manages memory in a few pages.</P>
<p>The I/O Manager contains the network system, including the <i>redirector</I> (which makes it possible for a workstation to use resources on the network) and the server. The network board drivers are part of the I/O Manager as well, as are the file systems, the cache manager, disk interface drivers, and other device drivers.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="556-559.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="561-563.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>