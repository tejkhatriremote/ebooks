<html>
<head>
<meta name=vsisbn content="0782124488">
<meta name=vstitle content="Mastering Windows 2000 Professional">
<meta name=vsauthor content="Mark Minasi, Todd Phillips">
<meta name=vspublisher content="Sybex, Inc.">
<meta name=vspubdate content="01/01/00">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Mastering Windows 2000 Professional:Advanced Troubleshooting Methodology</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//--></script>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0782124488.gif" width=60 height=73 alt="Mastering Windows 2000 Professional" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Mastering Windows 2000 Professional</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Mark Minasi, Todd Phillips</i>
    <br>
    Sybex, Inc.
    <br>
    <b>ISBN:</b>&nbsp;0782124488<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;01/01/00</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0782124488//-->
<!--TITLE=Mastering Windows 2000 Professional//-->
<!--AUTHOR=Mark Minasi//-->
<!--AUTHOR=Todd Phillips//-->
<!--PUBLISHER=SYBEX//-->
<!--CHAPTER=32//-->
<!--PAGES=10571060//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="1054-1057.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="1060-1062.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p>The MPR is contained in the file <tt>mpr.dll</TT>.</P>
<p><b>Network Provider DLL</B>&nbsp;&nbsp;A DLL is a dynamic-link library, which is basically a file that contains support functions for a program. In this case, the library of functions is part of a network client that is installed in Windows 2000.</P>
<p>There will be one provider DLL for each installed network client. The file for the native Windows 2000 client, LanmanWorkstation, for example, is <tt>ntlanman.dll</TT>.</P>
<p><b>Workstation Service and Server Service</B>&nbsp;&nbsp;These are the User mode components of the Workstation and Server services. Essentially, these are &#147;stubs&#148; that provide User mode applications with access to the Kernel mode Workstation and Server services of Windows 2000.</P>
<p><font size="+1"><b>Kernel Mode Components</B></FONT></P>
<p>The following are components of the Kernel mode.
</P>
<p><b>Multiple UNC Provider</B>&nbsp;&nbsp;The Multiple UNC Provider (MUP) is another traffic cop like the MPR, except that instead of directing traffic when mapping drives, the MUP directs traffic when you are using a Universal Naming Convention (UNC) path.</P>
<p>You will be using the MUP&#146;s services whenever you click Start <img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/reference/pro/0782124488/ch32/images/32-01i.jpg"> Run and type a path like <tt>\\Server5\Public</TT>, or when your application connects to a server resource without mapping a drive letter first. An example would be your e-mail program, which is configured to talk with one particular server to retrieve mail, but doesn&#146;t require that you first map a drive to the share on the server.</P>
<p>When the MUP receives a request for service, its job is to decide which file system driver (which network client) can best answer the request, then send the request to that driver.</P>
<p>The MUP is contained in the file <tt>mup.sys</TT>.</P>
<p><b>File System Drivers</B>&nbsp;&nbsp;File system drivers are the network redirectors and servers. When you install network support in Windows 2000, you always get two of these drivers by default. The first, <tt>rdr.sys</TT>, is the Kernel mode component of the Workstation service, your native Windows 2000 client. The second, <tt>srv.sys</TT>, is the Kernel mode portion of the Server service.</P>
<p>There may be other file system drivers installed for other network clients. One common example is the <tt>nwrdr.sys</TT> driver for the Client Services for NetWare in Windows 2000 Professional.</P>
<p><b>Transport Driver Interface</B>&nbsp;&nbsp;Transport Driver Interface (TDI) doesn&#146;t actually exist as a file. It is what its name implies, an interface between the file system drivers and the transport protocols. The TDI is <i>exposed</I> by the two layers&#151;that is to say that any file system driver for Windows 2000 networking must support the functions used by TDI, and the same for the transport protocols.</P>
<p>This layered approach allows for portability and extensibility. Because of the TDI boundary layer, you can (in theory) install as many network clients and servers or as many protocols as you want on Windows 2000.</P>
<p><b>Transport Protocols</B>&nbsp;&nbsp;These are the protocols used to communicate on your network. The files for each should be easy to identify because they are usually just the name of the protocol plus a <tt>.sys</TT> extension.</P>
<p>In theory, you can install an unlimited number of protocols in Windows 2000 so long as they conform to the two boundaries in the network stack. Transport protocols must expose the TDI boundary on top and the NDIS layer on the bottom.</P>
<p><b>Network Device Interface Specification</B>&nbsp;&nbsp;Network Device Interface Specification (NDIS) is foremost a boundary layer between the protocols and the adapter driver. But it has a more important job than that.</P>
<p>Years ago, when you wanted to develop a new driver for a network adapter card, you needed to think about details and settings like the media access scheme, error detection and correction, frame types, and so on, before you ever got to the part of the driver that just ran the card. NDIS was an effort by Microsoft, Intel, 3Com, and other companies to solve this problem. By conforming to a known standard, they could remove the common functions from the driver and load them into a library of functions that every network needs. Essentially, they wanted to stop reinventing the wheel every time they brought out another card.</P>
<p>NDIS, as it is implemented in Windows 2000, is an interesting component. It is both a file and a boundary layer. As a file, <tt>ndis.sys</TT> is a driver file that acts like a <tt>.dll</TT> in that it loads into memory, and anybody who knows how to talk to it can ask NDIS for support. As a boundary, it defines a standard form of communication between the transport protocols and the network adapter card.</P>
<p><b>NDIS-Compliant Network Adapter Driver</B>&nbsp;&nbsp;The bottom of the stack, but certainly very important, the Network Interface Card (NIC) driver is responsible for error-free transmission and reception of data on the physical network medium.</P>
<p>Using the NDIS standard enables you to install as many NICs as you want in a computer (of course, you only have so many slots in your computer). As long as the drivers comply with the NDIS standard, you can bind multiple cards to one protocol, or multiple protocols to one NIC.</P>
<p>The file containing the driver is named according to the naming convention of the manufacturer, but they all end with a <tt>.sys</TT> extension.</P>
<h3><a name="Heading21"></A><font color="#000077">Finding More Information</FONT></H3>
<p>This chapter provided you with a general method for troubleshooting and some specifics about applying the method to Windows 2000 Professional. It also made the point that sometimes you need more than a good method; you need good information. This final section introduces you to some of the premier sources of Windows 2000 troubleshooting information.
</P>
<h4 align="LEFT"><a name="Heading22"></A><font color="#000077">The Microsoft Knowledge Base</FONT></H4>
<p>This is the number one source of up-to-date information used to fix problems with Windows 2000 (or any Microsoft Product, for that matter). The Knowledge Base is a SQL database containing articles that describe known problems in Microsoft products, how to diagnose them, and most importantly, how to resolve them. The articles are typically written by the engineers in Microsoft Technical Support&#151;the people who have the hands-on knowledge of dealing with the problems.
</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="1054-1057.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="1060-1062.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>