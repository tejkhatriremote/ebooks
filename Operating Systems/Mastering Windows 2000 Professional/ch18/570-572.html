<html>
<head>
<meta name=vsisbn content="0782124488">
<meta name=vstitle content="Mastering Windows 2000 Professional">
<meta name=vsauthor content="Mark Minasi, Todd Phillips">
<meta name=vspublisher content="Sybex, Inc.">
<meta name=vspubdate content="01/01/00">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Mastering Windows 2000 Professional:Understanding the Architecture</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//--></script>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0782124488.gif" width=60 height=73 alt="Mastering Windows 2000 Professional" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Mastering Windows 2000 Professional</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Mark Minasi, Todd Phillips</i>
    <br>
    Sybex, Inc.
    <br>
    <b>ISBN:</b>&nbsp;0782124488<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;01/01/00</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0782124488//-->
<!--TITLE=Mastering Windows 2000 Professional//-->
<!--AUTHOR=Mark Minasi//-->
<!--AUTHOR=Todd Phillips//-->
<!--PUBLISHER=SYBEX//-->
<!--CHAPTER=18//-->
<!--PAGES=570-572//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="568-570.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="../ch19/573-575.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<h4 align="LEFT"><a name="Heading24"></A><font color="#000077">Virtual Memory</FONT></H4>
<p>And what if a Windows 2000 application tries to <i>use</I> all 2GB of its memory space? Well, obviously most of us don&#146;t have computers with that much RAM. So, Windows 2000 relies on an old dodge that operating systems have been using for years&#151;<i>virtual memory</I>. All processors that run Windows 2000 support virtual memory via <i>paging.</I> Here&#146;s how the dodge works.</P>
<p>First, CPUs divide their memory spaces into areas called <i>pages</I>. The 386, 486, Pentium, and Pentium Pro use 4K pages, as do the MIPS and PowerPC chips. The Alpha uses 8K pages. The Pentium and Pentium Pro have an option that enables them to use 4096K pages, but probably no one uses that feature.</P>
<p>Second, CPUs enable their operating systems to readdress any given page. If a page is physically addressed as (for example) address 2000K-2004K, there&#146;s nothing saying that a program <i>using</I> that page must think that its address is 2000K-2004K. The CPU can just say to the program, &#147;Oh, you needed address 124K through 128K? Well, here it is,&#148; and hand it that memory that is actually addressed from 2000K-2004K. In that case, we&#146;d say that the <i>physical address</I> of the block is from 2000K-2004K but the <i>logical address</I> is 124K-128K. <i>Physical</I> and <i>logical</I> are the common words, but if they&#146;re not too clear, then just substitute <i>actual</I> and <i>apparent,</I> as we do: The memory that is actually at address range 2000K-2004K appears to be in the range 124K-128K.</P>
<blockquote>
<p><font size="-1"><hr><b>TIP:&nbsp;&nbsp;</B>The value of virtual memory can&#146;t be overstated.<hr></FONT>
</BLOCKQUOTE>
<p>Suppose you have a computer that&#146;s running 15 programs of various sizes and you exit from a random 7 of those programs. Unless all the programs were sitting right next to one another, your computer&#146;s RAM is probably <i>fragmented</I>&#151;you have a block of used space, then a block of unused space, a block of used space, a block of unused space, and so on. So you load another program, and it wants <i>all</I> that space. Your operating system wants to give that RAM to the application all in one piece, so what does it do?</P>
<p>Well, on earlier operating systems, your system would defragment its memory, in a process somewhat like the <tt>DEFRAG</TT> command in MS-DOS 6.<i>x</I>, or the SpeedDisk application in Norton Utilities. That&#146;s a tricky operation, because it means that you have to move an application <i>while</I> the application is working; it&#146;s like tuning a car while it&#146;s running down the road at 65MPH. The ability to just readdress a block of memory with some bogus address and then tie that bogus address to a piece of software (and, best of all, to have that piece of software <i>believe</I> you) enables you to avoid defragging in the Norton Utilities way. Instead, all an operating system has to do is to grab all the free RAM, assign it contiguous memory addresses, and voil&#234;! Instant block of contiguous memory.</P>
<p>Now let&#146;s put those two facts together and see how CPUs help with virtual memory. First, we kind of indicated that the CPU lies about a memory block&#146;s address only when necessary; not so. An inveterate liar from way back, the CPU insists on <i>always</I> supplying logical, not physical addresses to Win32 programs. Ignoring Mark Twain&#146;s advice that if you always tell the truth, you never have to remember anything, the CPU maintains <i>page tables,</I> which remember the physical and logical addresses of all the system&#146;s memory. In the page table is a bit that says whether a page is located in memory.</P>
<p>In effect, the CPU can hand out a bogus 2GB to each and every application regardless of how much or how little RAM exists on the system. Also, at any given moment, a lot more pages than the computer could <i>ever</I> supply have been handed out to applications. And if an application tries to access a page that&#146;s not in RAM at the moment, the Virtual Memory Manager swings into action. It has a large file called the <i>paging file</I> (stored on the hard disk as <tt>pagefile.sys</TT>)<i>,</I> which acts as a holding tank for RAM pages. You see, if you&#146;re loading a 10MB application and you already have a 15MB application loaded but only 15MB of RAM available, then the Virtual Memory Manager takes the pages for the now-dormant 10MB application and writes them to the paging file. That leaves space to put the entire 15MB application into RAM, at least for a moment or two. And if only some of the pages in both applications are being used or if the sum of the used pages for both applications is less than 15MB, you can load 25MB of applications into 15MB of RAM!</P>
<h3><a name="Heading25"></A><font color="#000077">Summary</FONT></H3>
<p>In this chapter, we&#146;ve given you an overview of the pieces of Windows 2000 and how they fit together. We have reviewed some of Windows 2000&#146;s history and how it compares to other operating systems available today. We&#146;ve also delved into the hidden mysteries of Windows 2000&#146;s architecture that separate it from those other systems.
</P>
<p>In the next chapter, you&#146;ll read about another aspect of Windows 2000 that enables its pieces to work together&#151;security.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="568-570.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="../ch19/573-575.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>