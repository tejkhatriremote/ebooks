<html>
<head>
<meta name=vsisbn content="0782124488">
<meta name=vstitle content="Mastering Windows 2000 Professional">
<meta name=vsauthor content="Mark Minasi, Todd Phillips">
<meta name=vspublisher content="Sybex, Inc.">
<meta name=vspubdate content="01/01/00">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Mastering Windows 2000 Professional:Fixing Windows 2000 Professional When It Breaks</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//--></script>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0782124488.gif" width=60 height=73 alt="Mastering Windows 2000 Professional" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Mastering Windows 2000 Professional</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Mark Minasi, Todd Phillips</i>
    <br>
    Sybex, Inc.
    <br>
    <b>ISBN:</b>&nbsp;0782124488<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;01/01/00</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0782124488//-->
<!--TITLE=Mastering Windows 2000 Professional//-->
<!--AUTHOR=Mark Minasi//-->
<!--AUTHOR=Todd Phillips//-->
<!--PUBLISHER=SYBEX//-->
<!--CHAPTER=29//-->
<!--PAGES=928-930//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="925-928.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="930-933.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><b><i>dumpflop</I></B>&nbsp;&nbsp;You can use this utility to write a memory dump file on floppy disks in order to send it to technical support. Sending floppies away to tech support isn&#146;t necessarily an efficient method of debugging. The information is compressed as it is written to the floppies; so you won&#146;t have to worry about writing the 20-something disks for a 32MB dump file, but it still takes time. Fortunately, <tt>dumpflop</TT> doesn&#146;t access the symbol files to write the floppies.</P>
<p>To write the file to floppies, type the following:</P>
<!-- CODE SNIP //-->
<pre>
   <b>dumpflop [options] &lt;MemoryDumpFile&gt; [Drive:]</B>
</PRE>
<!-- END CODE SNIP //-->
<p>To obtain the dump file after writing it to the floppies, type
</P>
<!-- CODE SNIP //-->
<pre>
   <b>dumpflop [options] &lt;Drive&gt;: [MemoryDumpFile]</B>
</PRE>
<!-- END CODE SNIP //-->
<p>The options for writing and reading the file are given below:
</P>
<dl>
<dd><b>-?</B>&nbsp;&nbsp;Shows the command syntax.
<dd><b>-p</B>&nbsp;&nbsp;Prints only the header when assembling.
<dd><b>-v</B>&nbsp;&nbsp;Displays compression statistics.
<dd><b>-q</B>&nbsp;&nbsp;Formats the floppy before writing to the disks. When reading the disks, it overwrites the existing dump file.
</DL>
<p>If the command is executed with no options, it attempts to locate a dump file in the system root directory (the directory where Windows 2000 is installed) and writes it to floppies.
</P>
<p><b><i>dumpchk</I></B>&nbsp;&nbsp;You use the <tt>dumpchk</TT> utility to verify that the dump file was created and is not corrupted. It does not require access to the symbol files. To execute the command, type the following:</P>
<!-- CODE SNIP //-->
<pre>
    <b>dumpchk [options] MemoryDumpFile</B>
</PRE>
<!-- END CODE SNIP //-->
<p>The options are as follows:
</P>
<dl>
<dd><b>-?</B>&nbsp;&nbsp;Shows the command syntax.
<dd><b>-p</B>&nbsp;&nbsp;Prints only the header (no validation).
<dd><b>-v</B>&nbsp;&nbsp;Indicates verbose mode.
<dd><b>-q</B>&nbsp;&nbsp;Performs a quick test.
</DL>
<p>The <tt>dumpchk</TT> utility provides some basic information and then verifies all addresses in the file. It also reports any errors found in the file. This information can be used to determine what Kernel STOP Error occurred and which version of Windows NT or Windows 2000 was in use.</P>
<p><b><i>dumpexam</I></B>&nbsp;&nbsp;The <tt>dumpexam</TT> utility takes information from the dump file and writes it to a text file. You are then able to use the text file to find out what caused the Kernel STOP Error. The <tt>dumpexam</TT> utility requires three files in order to run. These files are on the Windows 2000 Server and Windows 2000 Professional Customer Support Diagnostics CDs in the directory <tt>Support/Debug/ Platform</TT>. You need</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>dumpexam.exe</TT>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>imagehlp.dll</TT>
<dd><b>&#149;</B>&nbsp;&nbsp;A third file, which needs to be one of the following, depending on which type of target computer the error occurred:
<dl>
<br>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>kdextx86.dll</TT>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>kdextalp.dll</TT>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>kdextmip.dll</TT>
<dd><b>&#149;</B>&nbsp;&nbsp;<tt>kdextppc.dll</TT>
</DL>
<br>
</DL>
<p>The <tt>dumpexam</TT> utility creates a file, <tt>memory.txt</TT> (in the same directory as <tt>memory.dmp</TT>), that contains information taken from the dump file. To run the utility, type the following:</P>
<!-- CODE SNIP //-->
<pre>
   <b>dumpexam [options] [MemoryDumpFile]</B>
</PRE>
<!-- END CODE SNIP //-->
<p>The options are as follows:
</P>
<dl>
<dd><b>-?</B>&nbsp;&nbsp;Shows the command syntax.
<dd><b>-v</B>&nbsp;&nbsp;Indicates verbose mode.
<dd><b>-p</B>&nbsp;&nbsp;Prints only the header.
<dd><b>-f</B>&nbsp;&nbsp;<i>filename</I> Specifies the output filename.
<dd><b>-y</B>&nbsp;&nbsp;<i>path</I> Sets the symbol search path.
</DL>
<p>The <tt>dumpexam</TT> output file displays the same information as in each of the Kernel Debugger commands given in the &#147;Using Debugger Commands&#148; section later in this chapter. To analyze the data, you&#146;ll need some knowledge of assembly language and Windows 2000 Kernel processes. However, the guidelines in the &#147;Using Debugger Commands&#148; section should give you an idea of what some of the output means.</P>
<blockquote>
<p><font size="-1"><hr><b>NOTE:&nbsp;&nbsp;</B>According to Microsoft, <tt>dumpexam</TT> is useful with only two STOP messages: STOP0x0000001E and STOP0x0000000A, both of which are frequently related to either bad drivers or faulty memory. The utility is worth running even on other STOP messages, and can sometimes offer enough of a clue to provide valid troubleshooting.<hr></FONT>
</BLOCKQUOTE>
<p>For example, suppose you have a dump file called <tt>memory.dmp</TT> (the default name of the file) in <tt>Winnt\System32</TT>. You want to produce a text summary of what the Dump Analyzer finds and store it in the <tt>mem.txt</TT> file. Suppose also that the <tt>dumpexam</TT> program sits on a CD-ROM in drive G. First, include <tt>G:\Support\Debug\I386</TT> in the system path. Then type the following on one line:</P>
<!-- CODE SNIP //-->
<pre>
   <b>dumpexam -v -f mem.txt -y g:\ support\debug\i386\symbols c:\winnt\</B>
   <b>system32\memory.dmp</B>
</PRE>
<!-- END CODE SNIP //-->
<p>That will produce a dump analysis file, which you can send to Microsoft or to your driver vendors in support of your bug report. It is <i>very</I> important to use the exact symbol library for your version of Windows 2000. The symbol libraries for Server and Professional are different, and every service pack has its own symbol library. If you don&#146;t use the exact symbol library, you&#146;ll get a pile of mismatched references and a useless dump analysis file.</P>
<h4 align="LEFT"><a name="Heading24"></A><font color="#000077">Using Kernel Debuggers</FONT></H4>
<p>Kernel Debuggers are used on the host computer to debug the Kernel STOP Error on the target computer. Each platform type has its own set of utilities, which are located in the <tt>\Support\Debug</TT> directory on the Windows 2000 Professional Customer Support Diagnostics CD. The debuggers are used for remote and local debugging. With remote debugging, the host computer can be anywhere and communicates with the target computer via modem. Local debugging takes place with the target and host computers a few feet from each other and communicating through a null-modem serial cable. Both computers send information through communications ports that must be running at the same baud rate.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="925-928.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="930-933.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>