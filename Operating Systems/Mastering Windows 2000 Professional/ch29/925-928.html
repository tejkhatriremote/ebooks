<html>
<head>
<meta name=vsisbn content="0782124488">
<meta name=vstitle content="Mastering Windows 2000 Professional">
<meta name=vsauthor content="Mark Minasi, Todd Phillips">
<meta name=vspublisher content="Sybex, Inc.">
<meta name=vspubdate content="01/01/00">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Mastering Windows 2000 Professional:Fixing Windows 2000 Professional When It Breaks</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//--></script>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/0782124488.gif" width=60 height=73 alt="Mastering Windows 2000 Professional" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Mastering Windows 2000 Professional</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Mark Minasi, Todd Phillips</i>
    <br>
    Sybex, Inc.
    <br>
    <b>ISBN:</b>&nbsp;0782124488<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;01/01/00</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=0782124488//-->
<!--TITLE=Mastering Windows 2000 Professional//-->
<!--AUTHOR=Mark Minasi//-->
<!--AUTHOR=Todd Phillips//-->
<!--PUBLISHER=SYBEX//-->
<!--CHAPTER=29//-->
<!--PAGES=925-928//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="923-925.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="928-930.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<h4 align="LEFT"><a name="Heading21"></A><font color="#000077">Understanding the Terminology</FONT></H4>
<p>First, let&#146;s get some terms out of the way:
</P>
<dl>
<dt><b>Kernel STOP Error</B>
<dd>Refers to Windows 2000 displaying a blue screen that contains error information and then stopping. It&#146;s the &#147;official&#148; term for what we call a <i>blue screen</I> or <i>Blue Screen of Death</I>.
<dt><b>Symbols and <i>Symbol Trees</I>
</B>
<dd>When programs are compiling, two types of executable files can be created: debug and non-debug. Debug code contains extra code that enables a developer to debug problems. The nondebug code runs faster and takes up less memory, but can&#146;t be debugged.
<br>Windows 2000 combines the debugging capability of debug code with the speed and smaller size of nondebug code. All drivers, executables, Dynamic Link Libraries, and the like are nondebug versions. However, each program has a corresponding symbol file that contains the debug code. These files are on the Windows 2000 Professional Customer Support Diagnostics CD in the <tt>\Support\Debug\Platform\Symbols</TT> directory, where <i>Platform</I> is IA64 or I386. Each type of file has its own subdirectory within the Symbols directory. This structure is also called a symbol tree. Table 29.1 lists the subdirectories in a standard symbol tree.
</DL>

<table width="100%">
<caption align=LEFT><b>Table 29.1</B> Symbol Tree Subdirectories
<tr>
<th width="30%" align="LEFT">Directory
<th width="70%" align="LEFT">File Type
<tr>
<td colspan="2"><hr>
<tr>
<td>Acm
<td>MSACM files
<tr>
<td>Com
<td><tt>.com</TT> files
<tr>
<td>Cpl
<td>Control Panel applets
<tr>
<td>Dll
<td><tt>.dll</TT> files
<tr>
<td>Drv
<td><tt>.drv</TT> files
<tr>
<td>Exe
<td><tt>.exe</TT> files
<tr>
<td>Scr
<td>Screen Saver files
<tr>
<td>Sys
<td><tt>.sys</TT> driver files
<tr>
<td colspan="2"><hr>
</TABLE>
<blockquote>
<p><font size="-1"><hr><b>NOTE:&nbsp;&nbsp;</B>Microsoft provided the symbols and debugger on the same CD as the operating system in the past. With Windows 2000 they have provided the tools and symbols on a separate CD called the Windows 2000 Customer Support Diagnostics CD.<hr></FONT>
</BLOCKQUOTE>
<dl>
<dt><b>Target Computer</B>
<dd>The computer on which a Kernel STOP Error occurs. This is the computer that needs to be debugged.
<dt><b>Host Computer</B>
<dd>The computer on which you run the debugger, a program that you&#146;ll use to peer into the ailing PC. This computer should have a running version that is at least as current as the version on the target computer.
</DL>

<h4 align="LEFT"><a name="Heading22"></A><font color="#000077">Diagnosing Blue Screens: An Overview</FONT></H4>
<p>You can find the source of Kernel STOP Errors in two ways:
</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;Configure the target computer to dump the contents of its memory into a file when the Kernel STOP Error occurs. You can use dump analysis utilities to then analyze the file. This is the easier method, and we recommend it if you can do it.
<dd><b>&#149;</B>&nbsp;&nbsp;Use a Kernel Debugger to troubleshoot the error. To do this, you must connect a computer with a working version of Windows 2000 Professional on it to the computer on which the Kernel STOP Error occurred and enter the debugging commands from the working machine. In this way, you can look at the memory contents of the machine for the source of the Kernel STOP Error. This method is very powerful, but running the target computer in debug mode slows it down tremendously.
</DL>
<h4 align="LEFT"><a name="Heading23"></A><font color="#000077">Using Memory Dump Files</FONT></H4>
<p>If you don&#146;t have the time to debug, you can set up a target computer so that it writes a memory dump file each time a Kernel STOP Error occurs. The <tt>dumpexam</TT> utility (the program we&#146;ve been calling the Dump Analyzer) uses this file to analyze the error, enabling a host computer to act as if it is hooked up to the target even though it isn&#146;t. Although creating this file lets you analyze the data at any time without tying up a couple of computers, it can be cumbersome. Your hard disk must have available space that is as large as the RAM of the computer with the STOP Error plus a little space for the file header. For example, a computer with 32MB of RAM will create a 32MB&#43; memory dump file. You also have to have a pagefile that is at least as large as your RAM plus 1MB on the same partition where Windows 2000 is installed. If you don&#146;t have enough disk space or if you&#146;re not sure whether you do, you should consider local or remote debugging instead.</P>
<p><font size="+1"><b>Creating the Memory Dump File</B></FONT></P>
<p>Before you can use the dump analysis utilities, you need to configure your Windows 2000 workstation to create a memory dump file when a Kernel STOP Error occurs. You&#146;ll need to use the Recovery dialog box in the System applet to create the memory file. The contents of your computer&#146;s memory at the time of the error are written to this dump file so that you will be able to analyze the problem. Using this option enables you to run the dump analysis utilities on any Windows 2000 Professional computer after you load the memory dump file&#151;this includes the computer on which the error occurred.
</P>
<p>To set up the target computer to create a memory dump file, you must do the following:</P>
<dl>
<dd><b>1.</B>&nbsp;&nbsp;Click the Recovery button in the System dialog box.
<dd><b>2.</B>&nbsp;&nbsp;Click the Write Debugging Information To check box.
<dd><b>3.</B>&nbsp;&nbsp;If you want the file to be overwritten every time a Kernel STOP Error occurs, check the Overwrite Any Existing File check box.
<dd><b>4.</B>&nbsp;&nbsp;Click the OK button.
</DL>
<p>Creating a memory dump file is a good option if you want to minimize the time that the host and target computers are unavailable. By running the dump analysis utilities, you can get the information needed for debugging and send it off to your technical support staff for analysis. If your computer still runs other applications, you can then go back to a somewhat normal routine.
</P>
<p><font size="+1"><b>Using the Dump Analysis Utilities</B></FONT></P>
<p>You will find three command-line utilities for analyzing memory dump files on your Windows 2000 Server and Windows 2000 Professional Customer Support Diagnostics CDs: <tt>dumpflop</TT>, <tt>dumpchk</TT>, and <tt>dumpexam</TT>. These files can be found in the <tt>Support\Debug\Platform</TT> directories of the CD, where <i>Platform</I> is I386, or ALPHA. You use these utilities to create floppy disks or a text file that you can send to technical support for analysis.</P><p><br></P>
<center>
<table border>
<tr>
<td><a href="923-925.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="928-930.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>