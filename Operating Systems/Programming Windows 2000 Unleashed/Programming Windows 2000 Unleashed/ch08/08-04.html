<html>
<head>
<meta name=vsisbn content="067231486x">
<meta name=vstitle content="Programming Microsoft Windows 2000 Unleashed">
<meta name=vsauthor content="MICKEY WILLIAMS">
<meta name=vsimprint content="Sams">
<meta name=vspublisher content="Macmillan Computer Publishing">
<meta name=vspubdate content="06/21/99">
<meta name=vscategory content="Operations Systems: Windows 2000">



<title>Programming Microsoft Windows 2000 Unleashed:Windows 2000 Debugging</TITLE>
<!-- BEGIN HEADER -->
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
',height=' + height + ',resizable=1,scrollbars=yes');
}
//--></SCRIPT>

<!-- HEADER -->
<style type="text/css">
<!--
A:hover { color:red }
-->
</STYLE>

<!-- HEADER -->
<style type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
 </STYLE>

</HEAD>
<BODY bgcolor=#FFFFFF><FONT size=2 face="Arial, verdana, helvetica"><table width=100% border=0 cellspacing=0 cellpadding=2><tr bgcolor=#000000><td width=100% align=right><b><font color=#FFFFFF>Gotcha</font></b></td></tr></table><br><!--Begin Content Column -->

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/images/sm_covers/067231486x.gif" width=60 height=73 alt="Programming Microsoft Windows 2000 Unleashed" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Programming Microsoft Windows 2000 Unleashed</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by MICKEY WILLIAMS</i>
    <br>
    Sams,&nbsp;Macmillan Computer Publishing
    <br>
    <b>ISBN:</b>&nbsp;067231486x<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;06/21/99</font>
</td>
</tr>
</table>
<p>
<!-- Empty Reference Subhead-->

<!--ISBN=067231486x//-->
<!--TITLE=Programming Microsoft Windows 2000 Unleashed//-->
<!--AUTHOR=Mickey Williams//-->
<!--PUBLISHER=Macmillan Computer Publishing//-->
<!--IMPRINT=sams//-->
<!--CHAPTER=08//-->
<!--PAGES=273-276//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<center>
<table border>
<tr>
<td><a href="08-03.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="08-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<p><br></P>
<p><font size="+1"><b>Using Edit and Continue</B></FONT></P>
<p>Edit and Continue is one of the really cool features introduced in Visual C<small>&#43;&#43;</SMALL> 6.0. Edit and Continue enables you to make small changes to your source code and continue debugging without relaunching your application.</P>
<p>When Edit and Continue is enabled, the compiler is automatically launched when you step to the next instruction after you&#146;ve made changes to the source code. If Edit and Continue can update your executable, messages similar to the following one will be displayed in the compiler&#146;s Build output window:</P>
<!-- CODE SNIP //-->
<pre>
Compiling...
DebugMfc1Dlg.cpp
Applying Code Changes...
Edit and Continue - 0 error(s), 0 warning(s)
</PRE>
<!-- END CODE SNIP //-->
<p>You can also elect to invoke Edit and Continue by Selecting Apply Code Changes from the Debug menu.
</P>
<p><font size="+1"><b>Changing the Value of a Variable</B></FONT></P>
<p>When debugging an application, you can change the values of any registers or nonconstant variables. Variables can be changed in the Watch or Variables window simply by clicking the value of the variable and entering a new value.
</P>
<h4 align="LEFT"><a name="Heading12"></A><font color="#000077">What&#146;s in a Window?</FONT></H4>
<p>If you&#146;ve only used the Visual C<small>&#43;&#43;</SMALL> debugger for stepping through your code, you may not be aware of many of the features available in the debugger. A number of dockable windows can be used to display all sorts of information about the current state of your program. These windows include the following:</P>
<dl>
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Watch window</I>. Displays the values of variables and expressions. This window allows you to change the values of variables.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Call Stack window</I>. Displays the current call stack. Each entry in the Call Stack window represents a nested function call to reach the current instruction. You can follow the path used to execute the current instruction by clicking entries in the call stack.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Memory window</I>. Displays a range of memory. This tab is useful when you&#146;re looking at blocks of data.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Variables window</I>. Displays variables in use. The Local tab displays variables that are in scope in the current function. The Auto tab displays variables used in the previous and current lines. The This tab displays variables accessed through the current <small>this</SMALL> pointer.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Registers window</I>. Displays the current contents of the machine&#146;s registers.
<dd><b>&#149;</B>&nbsp;&nbsp;<i>Disassembly window</I>. Displays the current program in assembly mode. By default, the display of assembly code is annotated with your source code.
</DL>
<p>Figure 8.6 shows the Visual C<small>&#43;&#43;</SMALL> debugger with the Call Stack, Watch, and Variables windows displayed.</P>
<p><a name="Fig6"></A><a href="javascript:displayWindow('../WebStripper/protected.html#link=http://corpitk.earthweb.com/reference/pro/067231486x/ch08/images/08-06.jpg',800,600 )"><img webstripperattrwas="src" webstripperlinkwas="http://corpitk.earthweb.com/reference/pro/067231486x/ch08/images/08-06t.jpg"></A>
<br><a href="javascript:displayWindow('../WebStripper/protected.html#link=http://corpitk.earthweb.com/reference/pro/067231486x/ch08/images/08-06.jpg',800,600)"><font color="#000077"><b>Figure 8.6</B></FONT></A>&nbsp;&nbsp;The Visual C<small>&#43;&#43;</SMALL> Debugger with several debug windows in use.
</P>
<h4 align="LEFT"><a name="Heading13"></A><font color="#000077">Visual C&#43;&#43; Debugger Tricks</FONT></H4>
<p>All the windows that are available during debugging have extra functionality that might not be obvious at first glance. Most of the windows are editable, and you can use drag-and-drop and cut-and-paste techniques, just as if they were text-editing windows.
</P>
<p>For example, if you&#146;re having problems with a particular <small>ASSERT</SMALL> or <small>VERIFY</SMALL> macro, it&#146;s easy to copy the information from the Call Stack window into a text file for later use.</P>
<p>Another trick you can do with the Call Stack window is to set a breakpoint inside the window. This enables you to easily return to a point listed inside the Call Stack window just by pressing F5 or clicking the Debug icon on the toolbar.</P>
<p>Another cool integration feature allows you to drag and drop variables from your source file directly into the Watch window. If you&#146;ve ever struggled to accurately type <small>m_pAfxSomeThingOrOther</SMALL> into a Watch window at 3 A.M., you&#146;ll appreciate this feature.</P>
<p>As discussed earlier in this chapter, the current value of a variable is displayed in a DataTip if you place the cursor over a variable in your source code while debugging. This works great if the variable is an <small>int</SMALL>, <small>DWORD</SMALL>, <small>LPSTR</SMALL>, or other simple type. The Visual C<small>&#43;&#43;</SMALL> debugger also displays the members of commonly used structures and classes, such as <small>RECT</SMALL> and <small>CRect</SMALL>. Although it isn&#146;t well documented, you can easily extend DataTips to include the classes and structures you&#146;re interested in.</P>
<p>The Visual C<small>&#43;&#43;</SMALL> debugger uses a file named <small>AUTOEXP.DAT</SMALL> to control how variables are automatically expanded when viewed in the debugger. The <small>AUTOEXP.DAT</SMALL> file contains both the type information for the variable and formatting properties that control the contents of the DataTip. The <small>AUTOEXP.DAT</SMALL> file is found in the <small>MsDev98\Bin</SMALL> subdirectory in your Visual C<small>&#43;&#43;</SMALL> installation directory. By default, the path is</P>
<!-- CODE SNIP //-->
<pre>
C:\Program Files\Microsoft Visual Studio\MsDev98\Bin\AUTOEXP.DAT
</PRE>
<!-- END CODE SNIP //-->
<p>This path may be different on your machine, depending on your installation directory.
</P>
<p>What little documentation that exists for automatic expansion is located at the top of the <small>AUTOEXP.DAT</SMALL> file. To add an entry for a new type, follow this format:</P>
<!-- CODE SNIP //-->
<pre>
type = [optional text] &ltmember varname[,optional format]&gt...
</PRE>
<!-- END CODE SNIP //-->
<p>The entry begins with the name of the type to be added to the file, such as <small>SailBoat</SMALL>, followed by a mandatory <small>=</SMALL>. Optional text is followed by a list of one or more member variables that are included in the DataTip. Each member variable is enclosed in angle brackets and may include optional formatting information, which is used to help format the contents of the member variable correctly.</P>
<p>The following are examples of valid entries in the version of <small>AUTOEXP.DAT</SMALL> that&#146;s included with Visual C<small>&#43;&#43;</SMALL> 6.0:</P>
<!-- CODE SNIP //-->
<pre>
CPaintDC =&lt,t&gt hWnd=&ltm_hWnd&gt
_bstr_t=&ltm_Data-&gtm_wstr,su&gt (&ltm_Data-&gtm_RefCount,u&gt)
CTime =time=&ltm_time&gt
</PRE>
<!-- END CODE SNIP //-->
<p><br></P>
<center>
<table border>
<tr>
<td><a href="08-03.html">Previous</A></TD>
<td><a href="../ewtoc.html">Table of Contents</A></TD>
<td><a href="08-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


</font></BODY></HTML>